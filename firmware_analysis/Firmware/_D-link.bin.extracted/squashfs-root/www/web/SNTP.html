<!DOCTYPE html>
<html id="html">
<head>
<meta name="viewport" content="width=1200">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Pragma" content="No-cache" />
<meta http-equiv="Cache-Control" content="no-cache, must-revalidate" />
<meta http-equiv="Expires" content="-1" />
<link rel=stylesheet type="text/css" href="css/jquery.selectbox.css" media="all" />
<link href="css/stylish-select.css" type="text/css" rel="stylesheet" />
<link href="css/style_page.css" type="text/css" rel="stylesheet" />
<title></title>
<script type="text/javascript" charset="utf-8" src="js/localization/zh-cn.js?V=dir822"></script>
<script type="text/javascript" charset="utf-8" src="js/header.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery.selectbox-0.2_new.js"></script>
<script type="text/javascript" charset="utf-8" src="js/SOAP/SOAPAction.js"></script>
<script type="text/javascript" charset="utf-8" src="js/initialJS.js"></script>
<script type="text/javascript">

//xframeoption
if(top!=self){top.location=self.location;}

var HNAP = new HNAP_XML();
var G_time="";
var G_statue="";
var G_timezone="";
var G_timedns1="";
var G_timedns2="";
function Load_HTML()	
{	
	MoreContainMiniheight();
	//$("#select_zone").selectbox({width:365});
	//$(".sbOptions").css("width","364px");
	GetLanguage();
}

//根据语言调整宽度
function GetLanguage()
{
	if(G_Language == "en-us")
	{
		$("#select_zone").selectbox({width:450});
		$(".sbOptions").css("width","449px");
		$(".networkstatue1").css("width","436px");
	}
	else
	{
		$("#select_zone").selectbox({width:385});
		$(".sbOptions").css("width","384px");
	}
}

function GetXML()	
{	
	GetResult_1st();
}
function GetResult_1st()
{
	var result_xml = new StringDoc();
	if (result_xml != null)
	{
		result_xml.Set("GetNTPServerSettings");
		HNAP.SetXMLAsync("GetNTPServerSettings", result_xml, function(xml)	{	GetResult_2nd(xml);	});
	}
	else	{	if (DebugMode == 1)	{	alert("[!!GetXML Error!!] Function: GetResult_1st");	}	}
}
	
function GetResult_2nd(result_xml)
{
	var GetResult_2nd = result_xml.Get("GetNTPServerSettingsResponse/GetNTPServerSettingsResult");
	if (GetResult_2nd == "OK"){
	
		G_time = result_xml.Get("GetNTPServerSettingsResponse/system_time_time");
		G_statue = result_xml.Get("GetNTPServerSettingsResponse/system_time_status");
		G_timezone = result_xml.Get("GetNTPServerSettingsResponse/system_time_timezone");

		var datetime=[];
		var week="";
		if(G_time!="")
		{
			datetime=G_time.split(" ");
		}
		if(datetime[2]=="1")
		{
			//week="周一";
			week=I18N("j","SNTP_Monday");
		}
		else if(datetime[2]=="2")
		{
			//week="周二";
			week=I18N("j","SNTP_Tuesday");
		}
		
		else if(datetime[2]=="3")
		{
			//week="周三";
			week=I18N("j","SNTP_Wednesday");
		}
		else if(datetime[2]=="4")
		{
			//week="周四";
			week=I18N("j","SNTP_Thursday");
		}
		else if(datetime[2]=="5")
		{
			//week="周五";
			week=I18N("j","SNTP_Friday");
		}
		else if(datetime[2]=="6")
		{
			//week="周六";
			week=I18N("j","SNTP_Saturday");
		}
		else if(datetime[2]=="7")
		{
			//week="周日";
			week=I18N("j","SNTP_Sunday");
		}
				
		document.getElementById("systemtime").innerHTML=datetime[0]+" "+datetime[1]+" "+week;					
		if(G_statue=="1")
		{
			//document.getElementById("systime_statue").innerHTML="已同步";
			document.getElementById("systime_statue").innerHTML=I18N("j","SNTP_is_Synchronous");
		}
		else
		{
			//document.getElementById("systime_statue").innerHTML="未同步";
			document.getElementById("systime_statue").innerHTML=I18N("j","SNTP_not_Synchronous");
		}
		
		document.getElementById("select_zone").value = G_timezone;
		
		
		$("#select_zone").selectbox('detach');
		//$("#select_zone").selectbox({width:365});
		//$(".sbOptions").css("width","364px");
		GetLanguage();
		$("#select_zone").selectbox();
		document.getElementById("right_content").style.display="";
		document.getElementById("CreateOnloadMessage").style.display="none";
		
	} else {	
		document.getElementById("right_content").style.display="";
		document.getElementById("CreateOnloadMessage").style.display="none";
		if (DebugMode == 1)	{	
			alert("[!!GetXML Error!!] Function: GetResult_2nd");
		}
	}
}

$(document).ready( function() {
	document.getElementById("right_content").style.display="none";
	document.getElementById("CreateOnloadMessage").style.display="";
	Load_HTML();
	GetXML();
	checkTimeout();
	
	document.getElementById("SNTP_CST_Jia_12").innerHTML = I18N("j","SNTP_CST_Jia_12");//CST+12 (IDL-国际换日线)
	document.getElementById("SNTP_CST_Jia_11").innerHTML = I18N("j","SNTP_CST_Jia_11");//CST+11 (MIT-中途岛标准时间)
	document.getElementById("SNTP_CST_Jia_10").innerHTML = I18N("j","SNTP_CST_Jia_10");//CST+10 (HST-夏威夷－阿留申标准时间)
	document.getElementById("SNTP_CST_Jia_9_30").innerHTML = I18N("j","SNTP_CST_Jia_9_30");//CST+9:30 (MSIT-马克萨斯群岛标准时间)
	document.getElementById("SNTP_CST_Jia_9").innerHTML = I18N("j","SNTP_CST_Jia_9");//CST+9 (AKST-阿拉斯加标准时间)
	document.getElementById("SNTP_CST_Jia_8").innerHTML = I18N("j","SNTP_CST_Jia_8");//CST+8 (PSTA-太平洋标准时间A)
	document.getElementById("SNTP_CST_Jia_7").innerHTML = I18N("j","SNTP_CST_Jia_7");//CST+7 (MST-北美山区标准时间)
	document.getElementById("SNTP_CST_Jia_6").innerHTML = I18N("j","SNTP_CST_Jia_6");//CST+6 (CST-北美中部标准时间)
	document.getElementById("SNTP_CST_Jia_5").innerHTML = I18N("j","SNTP_CST_Jia_5");//CST+5 (EST-北美东部标准时间)
	document.getElementById("SNTP_CST_Jia_4_30").innerHTML = I18N("j","SNTP_CST_Jia_4_30");//CST+4:30 (RVT-委内瑞拉标准时间)
	document.getElementById("SNTP_CST_Jia_4").innerHTML = I18N("j","SNTP_CST_Jia_4");//CST+4 (AST-大西洋标准时间)
	document.getElementById("SNTP_CST_Jia_3_30").innerHTML = I18N("j","SNTP_CST_Jia_3_30");//CST+3:30 (NST-纽芬兰岛标准时间)
	document.getElementById("SNTP_CST_Jia_3").innerHTML = I18N("j","SNTP_CST_Jia_3");//CST+3 (SAT-南美标准时间)
	document.getElementById("SNTP_CST_Jia_2").innerHTML = I18N("j","SNTP_CST_Jia_2");//CST+2 (BRT-巴西时间)
	document.getElementById("SNTP_CST_Jia_1").innerHTML = I18N("j","SNTP_CST_Jia_1");//CST+1 (CVT-佛得角标准时间)
	document.getElementById("SNTP_CST").innerHTML = I18N("j","SNTP_CST");//CST (WET-欧洲西部时区，GMT-格林威治标准时间)
	document.getElementById("SNTP_CST_Jian_1").innerHTML = I18N("j","SNTP_CST_Jian_1");//CST-1 (CET-欧洲中部时区)
	document.getElementById("SNTP_CST_Jian_2").innerHTML = I18N("j","SNTP_CST_Jian_2");//CST-2 (EET-欧洲东部时区)
	document.getElementById("SNTP_CST_Jian_3").innerHTML = I18N("j","SNTP_CST_Jian_3");//CST-3 (MSK-莫斯科时区)
	document.getElementById("SNTP_CST_Jian_3_30").innerHTML = I18N("j","SNTP_CST_Jian_3_30");//CST-3:30 (IRT-伊朗标准时间)
	document.getElementById("SNTP_CST_Jian_4").innerHTML = I18N("j","SNTP_CST_Jian_4");//CST-4 (META-中东时区A)
	document.getElementById("SNTP_CST_Jian_4_30").innerHTML = I18N("j","SNTP_CST_Jian_4_30");//CST-4:30 (AFT-阿富汗标准时间)
	document.getElementById("SNTP_CST_Jian_5").innerHTML = I18N("j","SNTP_CST_Jian_5");//CST-5 (METB-中东时区B)
	document.getElementById("SNTP_CST_Jian_5_30").innerHTML = I18N("j","SNTP_CST_Jian_5_30");//CST-5:30 (IDT-印度标准时间)
	document.getElementById("SNTP_CST_Jian_5_45").innerHTML = I18N("j","SNTP_CST_Jian_5_45");//CST-5:45 (NPT-尼泊尔标准时间)
	document.getElementById("SNTP_CST_Jian_6").innerHTML = I18N("j","SNTP_CST_Jian_6");//CST-6 (BHT-孟加拉标准时间)
	document.getElementById("SNTP_CST_Jian_6_30").innerHTML = I18N("j","SNTP_CST_Jian_6_30");//CST-6:30 (MRT-缅甸标准时间)
	document.getElementById("SNTP_CST_Jian_7").innerHTML = I18N("j","SNTP_CST_Jian_7");//CST-7 (MST-中南半岛标准时间)
	document.getElementById("SNTP_CST_Jian_8").innerHTML = I18N("j","SNTP_CST_Jian_8");//CST-8 (EAT-东亚标准时间)
	document.getElementById("SNTP_CST_Jian_8_30").innerHTML = I18N("j","SNTP_CST_Jian_8_30");//CST-8:30 (朝鲜标准时间)
	document.getElementById("SNTP_CST_Jian_9").innerHTML = I18N("j","SNTP_CST_Jian_9");//CST-9 (FET-远东标准时间)
	document.getElementById("SNTP_CST_Jian_9_30").innerHTML = I18N("j","SNTP_CST_Jian_9_30");//CST-9:30 (ACST-澳大利亚中部标准时间)
	document.getElementById("SNTP_CST_Jian_10").innerHTML = I18N("j","SNTP_CST_Jian_10");//CST-10 (AEST-澳大利亚东部标准时间)
	document.getElementById("SNTP_CST_Jian_10_30").innerHTML = I18N("j","SNTP_CST_Jian_10_30");//CST-10:30 (FAST-澳大利亚远东标准时间)
	document.getElementById("SNTP_CST_Jian_11").innerHTML = I18N("j","SNTP_CST_Jian_11");//CST-11 (VTT-瓦努阿图标准时间)
	document.getElementById("SNTP_CST_Jian_11_30").innerHTML = I18N("j","SNTP_CST_Jian_11_30");//CST-11:30 (NFT-诺福克岛标准时间)
	document.getElementById("SNTP_CST_Jian_12").innerHTML = I18N("j","SNTP_CST_Jian_12");//CST-12 (PSTB-太平洋标准时间B)
	document.getElementById("SNTP_CST_Jian_12_45").innerHTML = I18N("j","SNTP_CST_Jian_12_45");//CST-12:45 (CIT-查塔姆群岛标准时间)
	document.getElementById("SNTP_CST_Jian_13").innerHTML = I18N("j","SNTP_CST_Jian_13");//CST-13 (PSTC-太平洋标准时间C)
	document.getElementById("SNTP_CST_Jian_14").innerHTML = I18N("j","SNTP_CST_Jian_14");//CST-14 (PSTD-太平洋标准时间D)
	
	document.getElementById("savebutton5").value = I18N("j","Commom_Save");//保存
});

function SaveData()
{
	$.ajax({
			cache: false,
			url: "./js/CheckConnection",
			timeout: 5000,
			type: "GET",
			success: function(data) {
				SetXML();
			},
			error: function() {
				document.getElementById("DetectRouterConnection").style.display = "inline";
			}
		});		
}

function SetXML() {
	document.getElementById("CreatePopAlertMessage").style.display = "inline";
	document.getElementById("waitSettingFinish").style.display = "inline";
	SetResult_3st();
}

function SetResult_3st() {
	var result_xml = new StringDoc();
	if (result_xml != null) {

		result_xml.Set("SetNTPServerSettings/system_time_timezone", document.getElementById("select_zone").value);
		HNAP.SetXMLAsync("SetNTPServerSettings", result_xml, function(xml)	{	SetResult_2nd(xml);	});
	} else {	
		if (DebugMode == 1)	{	
			alert("[!!SetXML Error!!] Function: SetResult_3st");	
		}	
	}
}

function SetResult_2nd(result_xml) {
	var SetResult_1st = result_xml.Get("SetNTPServerSettingsResponse/SetNTPServerSettingsResult");
	if (SetResult_1st == "OK") {
		setTimeout("waitSettingFinished()", 1000);
	}
	if (SetResult_1st == "ERROR") {
		if (DebugMode == 1) {
		alert("[!!SetXML Error!!] Function: SetResult_2nd");
		}
		window.location.reload();
	}
}
function waitSettingFinished() 
{
	window.location.reload();
}	
	
	

</script>
</head>

<body>
<!-------------------- Logo menu------------------------->
	<div class="wrapper">  
		<div id="header"></div>
		<div class="clearboth" align="center" id="content">
			<div class="morecontent" align="center" id="basiccontent">
		 		<div class="pull-left" id="sub_menu_container"> 
				<script>initialLeftMenu();</script>
				</div>
				<div id="right_content"  class="pull-left" style="display:none; ">
					<table border="0"  class="clearboth tablemoreheader" cellpadding="0" cellspacing="0" align="left">
						<tr>
							<th><script>I18N("h","Commom_SNTP_Time");</script><!-- 网络时间 --></th>
						</tr>
					</table>
					<div class="clearboth moreline1"></div>
					<div class="moredescription"><span class="inlineblock"><script>I18N("h","SNTP_Headline");</script><!-- 网络时间主要用于将路由器的系统时间与网络时间同步，确保系统时间的准确性。 --></span></div>
					 <table border="0" class="clearboth block" cellpadding="0" cellspacing="0" align="left" style="margin-top:36px; ">
					 	<tbody>
						  <tr>
							<th><script>I18N("h","SNTP_System_Time");</script><!-- 系统时间 --></th>
							<td>
							 <div class="networkstatue1" id="systemtime"></div>
							</td>
						  </tr>
						<tr class="space"></tr>
						<tr>
						  <th>
						 <script>I18N("h","SNTP_Synchronous_Status");</script><!-- 同步状态 -->
						  </th>
						  <td>
						   <div class="networkstatue1" id="systime_statue"></div>
						  </td>
						</tr>			
						<tr class="space"></tr>
						<tr>
						  <th>
						   <script>I18N("h","SNTP_Set_Time");</script><!-- 设置时区 -->
						  </th>
						  <td>
							<select name="select_zone" id="select_zone">
								  <option id="SNTP_CST_Jia_12" value="CST+12">
									<!-- CST+12 (IDL-国际换日线) -->
								  </option>
								  <option id="SNTP_CST_Jia_11" value="CST+11">
									<!-- CST+11 (MIT-中途岛标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jia_10" value="CST+10">
									<!-- CST+10 (HST-夏威夷－阿留申标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jia_9_30" value="CST+9:30">
									<!-- CST+9:30 (MSIT-马克萨斯群岛标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jia_9" value="CST+9">
									<!-- CST+9 (AKST-阿拉斯加标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jia_8" value="CST+8">
									<!-- CST+8 (PSTA-太平洋标准时间A) -->
								  </option>
								  <option id="SNTP_CST_Jia_7" value="CST+7">
									<!-- CST+7 (MST-北美山区标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jia_6" value="CST+6">
									<!-- CST+6 (CST-北美中部标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jia_5" value="CST+5">
									<!-- CST+5 (EST-北美东部标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jia_4_30" value="CST+4:30">
									<!-- CST+4:30 (RVT-委内瑞拉标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jia_4" value="CST+4">
									<!-- CST+4 (AST-大西洋标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jia_3_30" value="CST+3:30">
									<!-- CST+3:30 (NST-纽芬兰岛标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jia_3" value="CST+3">
									<!-- CST+3 (SAT-南美标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jia_2" value="CST+2">
									<!-- CST+2 (BRT-巴西时间) -->
								  </option>
								  <option id="SNTP_CST_Jia_1" value="CST+1">
									<!-- CST+1 (CVT-佛得角标准时间) -->
								  </option>
								  <option id="SNTP_CST" value="CST">
									<!-- CST (WET-欧洲西部时区，GMT-格林威治标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_1" value="CST-1">
									<!-- CST-1 (CET-欧洲中部时区) -->
								  </option>
								  <option id="SNTP_CST_Jian_2" value="CST-2">
									<!-- CST-2 (EET-欧洲东部时区) -->
								  </option>
								  <option id="SNTP_CST_Jian_3" value="CST-3">
									<!-- CST-3 (MSK-莫斯科时区) -->
								  </option>
								  <option id="SNTP_CST_Jian_3_30" value="CST-3:30">
									<!-- CST-3:30 (IRT-伊朗标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_4" value="CST-4">
									<!-- CST-4 (META-中东时区A) -->
								  </option>
								  <option id="SNTP_CST_Jian_4_30" value="CST-4:30">
									<!-- CST-4:30 (AFT-阿富汗标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_5" value="CST-5">
									<!-- CST-5 (METB-中东时区B) -->
								  </option>
								  <option id="SNTP_CST_Jian_5_30" value="CST-5:30">
									<!-- CST-5:30 (IDT-印度标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_5_45" value="CST-5:45">
									<!-- CST-5:45 (NPT-尼泊尔标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_6" value="CST-6">
									<!-- CST-6 (BHT-孟加拉标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_6_30" value="CST-6:30">
									<!-- CST-6:30 (MRT-缅甸标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_7" value="CST-7">
									<!-- CST-7 (MST-中南半岛标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_8" value="CST-8">
									<!-- CST-8 (EAT-东亚标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_8_30" value="CST-8:30">
									<!-- CST-8:30 (朝鲜标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_9" value="CST-9">
									<!-- CST-9 (FET-远东标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_9_30" value="CST-9:30">
									<!-- CST-9:30 (ACST-澳大利亚中部标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_10" value="CST-10">
									<!-- CST-10 (AEST-澳大利亚东部标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_10_30" value="CST-10:30">
									<!-- CST-10:30 (FAST-澳大利亚远东标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_11" value="CST-11">
									<!-- CST-11 (VTT-瓦努阿图标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_11_30" value="CST-11:30">
									<!-- CST-11:30 (NFT-诺福克岛标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_12" value="CST-12">
									<!-- CST-12 (PSTB-太平洋标准时间B) -->
								  </option>
								  <option id="SNTP_CST_Jian_12_45" selected="selected" value="CST-12:45">
									<!-- CST-12:45 (CIT-查塔姆群岛标准时间) -->
								  </option>
								  <option id="SNTP_CST_Jian_13" value="CST-13">
									<!-- CST-13 (PSTC-太平洋标准时间C) -->
								  </option>
								  <option id="SNTP_CST_Jian_14" value="CST-14">
									<!-- CST-14 (PSTD-太平洋标准时间D) -->
								  </option>
							
							</select>						  
						</td>
						</tr>						 					 
					 </tbody>	
					 </table>
					 <table style="margin-left:70px; margin-top:36px;" class="clearboth" align="left" >
					 <!-- <tr><td><input type="button" value="保存" id="savebutton5" class="styled_button_s" onClick="SaveData();"></td></tr> -->
					 <tr><td><input type="button" value="" id="savebutton5" class="styled_button_s" onClick="SaveData();"></td></tr>
					 </table>
	
				</div><!--end right_content -->
			</div>
	   </div>
 	   <div class="footer_placeholder"></div>  
   </div>
	
	<div id="footer"></div>

	<div id="CreatePopAlertMessage" style=" display:none;"></div>
	<div style=" display:none;" id="DetectRouterConnection"></div>
	<div id="CreateOnloadMessage" style="display:none;"><div class="OnLoadPopRect"><img src="/image/submit.gif" width="58" height="58"></div></div>
</body>
<script type="text/javascript">
Initial();
</script>
</html>
