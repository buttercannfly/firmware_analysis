<!DOCTYPE html>
<html id="html">
<head>
<meta name="viewport" content="width=1200">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Pragma" content="No-cache" />
<meta http-equiv="Cache-Control" content="no-cache, must-revalidate" />
<meta http-equiv="Expires" content="-1" />
<link rel=stylesheet type="text/css" href="css/jquery.selectbox.css" media="all" />
<link href="css/stylish-select.css" type="text/css" rel="stylesheet" />
<link href="css/style_page.css" type="text/css" rel="stylesheet" />
<title></title>
<script type="text/javascript" charset="utf-8" src="js/localization/zh-cn.js?V=dir822"></script>
<script type="text/javascript" charset="utf-8" src="js/header.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery.selectbox-0.2_new.js"></script>
<script type="text/javascript" charset="utf-8" src="js/SOAP/SOAPAction.js"></script>
<script type="text/javascript" charset="utf-8" src="js/initialJS.js"></script>
<script type="text/javascript" charset="utf-8" src="js/verify/verify.js"></script>
<script type="text/javascript" charset="utf-8" src="js/AES.js"></script>

<script type="text/javascript">
//xframeoption
if(top!=self){top.location=self.location;}

var DebugMode=0;
var HNAP = new HNAP_XML();
var wan_proto;
var mtu;
var dhcpenable;
var dhcpstart;
var dhcpend;
var dhcpleasetime;
var current_client_mac;
var lanGatewayip;
var lanGatewaymask;
var lanmac;
var guestip;//访客网络ip
var guestmask;//访客网络mask
var isManualMacSelect=false;/*pppoe、DHCP、Static三种相同*/
var isStaicDNSSelect=true;//pppoe、DHCP的DNS选择，初始为关闭
var isStaticType=false;//初始为非静态IP设置
var isConflict=false;
var time=0;
var timer1=null;
var timer2=null;
var SetDataTimer=null;

//var protoWan = [["pppoe","宽带帐号上网(PPPoE)"],["dhcp","自动获取IP(DHCP)"],["static","手动输入IP(静态IP)"]];
var protoWan = [["normal",I18N("j","RouterInfo_PPPoE")],["dhcp",I18N("j","RouterInfo_DHCP")],["static",I18N("j","RouterInfo_Static")],["pppoe_plus",I18N("j","RouterInfo_PPPoE1")],["pppoe_dynamic",I18N("j","RouterInfo_PPPoE2")],["pppoe_other1",I18N("j","RouterInfo_PPPoE3")],["pppoe_other2",I18N("j","RouterInfo_PPPoE4")]];

function getArray1(index_string,index_array)
{
	var i = 0;
	
	for (i = 0; i < index_array.length; i++) {
		if (index_string == index_array[i][0])
			return index_array[i][1];
	}
	return -1;
}

function GetXML()	
{	
	GetResult_1st();
}
function GetResult_1st()
{
	
	$("#select_networktype").selectbox();
	$("#select_macclone").selectbox();
	$("#select_wanspeed").selectbox();
	$("#select_networktype_special").selectbox();
	
	var result_xml = new StringDoc();
	if (result_xml != null)
	{
		result_xml.Set("GetMultipleHNAPs/GetWanSettings");
		result_xml.Set("GetMultipleHNAPs/GetSysStatus");
		result_xml.Set("GetMultipleHNAPs/GetCurrentInfoSettings");
		result_xml.Set("GetMultipleHNAPs/GetNetworkSettings");//lan口设置，判断wan与lan ip在同一网段
		result_xml.Set("GetMultipleHNAPs/GetGuestNetworkSettings");//与Guest网段相同判断
		HNAP.SetXMLAsync("GetMultipleHNAPs", result_xml, function(xml)	{	GetResult_2nd(xml);	});
	}
	else	{	if (DebugMode == 1)	{	alert("[!!GetXML Error!!] Function: GetResult_1st");	}	}
}
	
function GetResult_2nd(result_xml)
{
	var GetResult_2nd = result_xml.Get("GetMultipleHNAPsResponse/GetMultipleHNAPsResult");
	if (GetResult_2nd == "OK"){
		
		//状态信息
		var networkproto = result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_proto");
		var ret;
		if(networkproto == "pppoe"){
			var pppoedialtype = result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_pppoe_type");
			ret = getArray1(pppoedialtype,protoWan);
			document.getElementById("tr_PPPoE_Status").style.display = "";
			if(result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_ipaddr") != ""){
				document.getElementById("td_PPPoE_Status").innerHTML = I18N("j","RouterInfo_PPPoE_Successful");//拨号成功
			}
			else
			{
				var pppoestatus = result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_pppoe_status");
				if(pppoestatus == "8"){
					document.getElementById("td_PPPoE_Status").innerHTML = I18N("j","RouterInfo_Connection_Failed") + pppoestatus +")";//拨号连接失败
				}
				else if(pppoestatus == "10"){
					document.getElementById("td_PPPoE_Status").innerHTML = I18N("j","RouterInfo_Negotiation_Failed") + pppoestatus +")";//拨号协商失败
				}
				else if(pppoestatus == "19"){
					document.getElementById("td_PPPoE_Status").innerHTML = I18N("j","RouterInfo_Authenticate_Failed") + pppoestatus +")";//帐号验证失败
				}
				else if(pppoestatus == "100"){
					document.getElementById("td_PPPoE_Status").innerHTML = I18N("j","RouterInfo_Dialing");//正在拨号中...
				}
				else{
					document.getElementById("td_PPPoE_Status").innerHTML = I18N("j","RouterInfo_Other_Failed") + pppoestatus +")";//未知的错误
				}
			}
		}
		else{
			ret = getArray1(networkproto,protoWan);
		}
		if (ret != -1)
			document.getElementById("networktypeinfo").innerHTML = ret;
		
		
		if (result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_ipaddr") == "") {
			//document.getElementById("ipinfo").innerHTML = "无法获取IP地址";
			document.getElementById("ipinfo").innerHTML = I18N("j","RouterInfo_IP_Empty");
		} else {
			document.getElementById("ipinfo").innerHTML = result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_ipaddr");		
		}
		
		if (result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_netmask") == "") {
			//document.getElementById("networkmaskinfo").innerHTML = "无法获取子网掩码";
			document.getElementById("networkmaskinfo").innerHTML = I18N("j","Network_Mask_Empty");
		} else {
			document.getElementById("networkmaskinfo").innerHTML = result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_netmask");		
		}
		
		if (result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_gateway") == "") {
			//document.getElementById("gatewayinfo").innerHTML = "无法获取网关地址";
			document.getElementById("gatewayinfo").innerHTML = I18N("j","RouterInfo_Gateway_Empty");
		} else {
			document.getElementById("gatewayinfo").innerHTML = result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_gateway");		
		}
		
		if (result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_dns") == "") {
			//document.getElementById("DNSinfo").innerHTML = "无法获取DNS地址";
			document.getElementById("DNSinfo").innerHTML = I18N("j","Home_DNS_Empty");
		} else {
			document.getElementById("DNSinfo").innerHTML = result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_dns");		
		}
		
		//WAN模块数据
		wan_proto = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_proto");
		var mac_clone_enable;
		var clone_mac;
		var dns_manual;
		var dns_server;
		var dns_array;
		var pppoetype="";
		
		if(wan_proto=="pppoe")
		{
			pppoetype=result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_pppoe_type");
		}
		
		lanGatewayip=result_xml.Get("GetMultipleHNAPsResponse/GetNetworkSettingsResponse/lan(0)_ipaddr");
		lanGatewaymask=result_xml.Get("GetMultipleHNAPsResponse/GetNetworkSettingsResponse/lan(0)_netmask");
		lanmac=result_xml.Get("GetMultipleHNAPsResponse/GetNetworkSettingsResponse/lan(0)_mac");
		guestip=result_xml.Get("GetMultipleHNAPsResponse/GetGuestNetworkSettingsResponse/wl(0)_guest(0)_ipaddr");
		guestmask=result_xml.Get("GetMultipleHNAPsResponse/GetGuestNetworkSettingsResponse/wl(0)_guest(0)_netmask");
		var wan_speed = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan_speed");
		var wan_duplex = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan_duplex");

		current_client_mac =  result_xml.Get("GetMultipleHNAPsResponse/GetCurrentInfoSettingsResponse/current_client_mac");
		
		var username = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_pppoe_username");
		var password = AES_Decrypt128(result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_pppoe_passwd"));
		document.getElementById("pppoe_name").value = username;
		document.getElementById("pppoe_psassword1").value = password;
		document.getElementById("pppoe_psassword2").value = password;
		if (password == "")
		{
			document.getElementById("pwdstr1").style.display = "inline";
			document.getElementById("pwdstr2").style.display = "inline";
		}
		else 
		{
			document.getElementById("pwdstr1").style.display = "none";
			document.getElementById("pwdstr2").style.display = "none";
		}
		
		switch(wan_proto) {
		case "pppoe":
		
			if(pppoetype=="normal")
			{
				document.getElementById("select_networktype").value = "PPPoE";
			}
			else
			{
				document.getElementById("select_networktype").value = "SpecialDialing";
				if(pppoetype=="pppoe_plus")
				{
					document.getElementById("select_networktype_special").value = "PPPoE_Plus";
				}
				else if(pppoetype=="pppoe_dynamic")
				{
					document.getElementById("select_networktype_special").value = "PPPoE_Dynamic";
				}
				else if(pppoetype=="pppoe_other1")
				{
					document.getElementById("select_networktype_special").value = "PPPoE_Other1";
				}
				else if(pppoetype=="pppoe_other2")
				{
					document.getElementById("select_networktype_special").value = "PPPoE_Other2";
				}
			}
			//var username = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_pppoe_username");
			//var password = AES_Decrypt128(result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_pppoe_passwd"));
			var service_name = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_pppoe_service");
			mtu = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_mtu");
			mac_clone_enable = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_mac_clone_enable");
			dns_manual = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_dns_manual");
			//alert("mac_clone_enable");
			//alert(mac_clone_enable);
			//mac clone
			if (mac_clone_enable == "1") {
				clone_mac  = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_clone_mac");
				if (clone_mac != current_client_mac) {
					document.getElementById("select_macclone").value = "manual";
					document.getElementById("macaddress").value = clone_mac;
				} else {
					document.getElementById("select_macclone").value = "pcmac";
				}
			} else {
				document.getElementById("select_macclone").value = "none";
			}
			
			//alert(document.getElementById("select_macclone").value);
			//dns manual
			if (dns_manual == "1") {
				dns_server = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_dns");
				document.getElementById("dns_enable").checked = true;
				
				dns_array = dns_server.split(";");
				
				if (dns_array.length == 2) {
					document.getElementById("dnssever1").value = dns_array[0];
					document.getElementById("dnssever2").value = dns_array[1];
				} else {
					document.getElementById("dnssever1").value = dns_server;
					document.getElementById("dnssever2").value = "";
				}
				
			} else {
				document.getElementById("dns_enable").checked = false;
			}
			//wan口速率:
			switch(wan_speed) {
			case "Auto":
				document.getElementById("select_wanspeed").value = "Auto";
				break;
			case "100":
				if (wan_duplex == "Full") {
					document.getElementById("select_wanspeed").value = "100Full";
				} else {
					document.getElementById("select_wanspeed").value = "100Half";
				}
				break;
			case "10":
				if (wan_duplex == "Full") {
					document.getElementById("select_wanspeed").value = "10Full";
				} else {
					document.getElementById("select_wanspeed").value = "10Half";
				}
				break;
			default:
				break;
			}
			//document.getElementById("pppoe_name").value = username;
			//document.getElementById("pppoe_psassword1").value = password;
			//document.getElementById("pppoe_psassword2").value = password;
			document.getElementById("pppoe_serviename").value = service_name;
			document.getElementById("mtu").value = mtu;
			break;
		case "dhcp":
			document.getElementById("select_networktype").value = "DHCP";
			mtu = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_mtu");
			mac_clone_enable = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_mac_clone_enable");
			dns_manual = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_dns_manual");
			
			document.getElementById("select_networktype").value = "DHCP";
			document.getElementById("mtu").value = mtu;
			//mac clone
			//alert(mac_clone_enable);
			if (mac_clone_enable == "1") {
				clone_mac  = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_clone_mac");
				if (clone_mac != current_client_mac) {
					document.getElementById("select_macclone").value = "manual";
					document.getElementById("macaddress").value = clone_mac;
				} else {
					document.getElementById("select_macclone").value = "pcmac";
				}
			} else {
				//alert("none mac");
				document.getElementById("select_macclone").value = "none";
			}
			//dns manual
			if (dns_manual == "1") {
				dns_server = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_dns");
				document.getElementById("dns_enable").checked = true;
				
				//alert(dns_server);
				
				dns_array = dns_server.split(";");
				
				if (dns_array.length == 2) {
					document.getElementById("dnssever1").value = dns_array[0];
					document.getElementById("dnssever2").value = dns_array[1];
				} else {
					document.getElementById("dnssever1").value = dns_server;
					document.getElementById("dnssever2").value = "";
				}
				
			} else {
				document.getElementById("dns_enable").checked = false;
			}
			//wan口速率:
			switch(wan_speed) {
			case "Auto":
				document.getElementById("select_wanspeed").value = "Auto";
				break;
			case "100":
				if (wan_duplex == "Full") {
					document.getElementById("select_wanspeed").value = "100Full";
				} else {
					document.getElementById("select_wanspeed").value = "100Half";
				}
				break;
			case "10":
				if (wan_duplex == "Full") {
					document.getElementById("select_wanspeed").value = "10Full";
				} else {
					document.getElementById("select_wanspeed").value = "10Half";
				}
				break;
			default:
				break;
			}
			break;
		case "static":
			document.getElementById("select_networktype").value = "Static";
			var ip = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_ipaddr");
			var mask = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_netmask");
			var default_gw = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_gateway");
			dns_server = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_dns ");
			mtu = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_mtu");
			mac_clone_enable = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_mac_clone_enable");
			
			document.getElementById("staticIpaddr").value = ip;
			document.getElementById("staticmask").value = mask;
			document.getElementById("staticgateway").value = default_gw;
			document.getElementById("mtu").value = mtu;
			//mac clone
			if (mac_clone_enable == "1") {
				clone_mac  = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_clone_mac");
				if (clone_mac != current_client_mac) {
					document.getElementById("select_macclone").value = "manual";
					document.getElementById("macaddress").value = clone_mac;
				} else {
					document.getElementById("select_macclone").value = "pcmac";
				}
			} else {
				document.getElementById("select_macclone").value = "none";
			}
			//static dns server
			dns_server = result_xml.Get("GetMultipleHNAPsResponse/GetWanSettingsResponse/wan_wan(0)_dns");
			dns_array = dns_server.split(";");
			if (dns_array.length == 2) {
				document.getElementById("staticdns1").value = dns_array[0];
				document.getElementById("staticdns2").value = dns_array[1];
			} else {
				document.getElementById("staticdns1").value = dns_server;
				document.getElementById("staticdns2").value = "";
			}
			//wan口速率:
			switch(wan_speed) {
			case "Auto":
				document.getElementById("select_wanspeed").value = "Auto";
				break;
			case "100":
				if (wan_duplex == "Full") {
					document.getElementById("select_wanspeed").value = "100Full";
				} else {
					document.getElementById("select_wanspeed").value = "100Half";
				}
				break;
			case "10":
				if (wan_duplex == "Full") {
					document.getElementById("select_wanspeed").value = "10Full";
				} else {
					document.getElementById("select_wanspeed").value = "10Half";
				}
				break;
			default:
				break;
			}
			break;
		case "bridge":
			document.getElementById("select_networktype").value = "Bridge";
			//wan口速率:
			switch(wan_speed) {
			case "Auto":
				document.getElementById("select_wanspeed").value = "Auto";
				break;
			case "100":
				if (wan_duplex == "Full") {
					document.getElementById("select_wanspeed").value = "100Full";
				} else {
					document.getElementById("select_wanspeed").value = "100Half";
				}
				break;
			case "10":
				if (wan_duplex == "Full") {
					document.getElementById("select_wanspeed").value = "10Full";
				} else {
					document.getElementById("select_wanspeed").value = "10Half";
				}
				break;
			default:
				break;
			}
			break;
		default:
			break;
		}
		//WAN模块数据 end
		$("#select_networktype").selectbox('detach');
		$("#select_macclone").selectbox('detach');
		$("#select_wanspeed").selectbox('detach');
		$("#select_networktype_special").selectbox('detach');
		$("#select_networktype").selectbox();
		$("#select_macclone").selectbox();
		$("#select_wanspeed").selectbox();
		$("#select_networktype_special").selectbox();
		
		changnetWorkType();
		document.getElementById("content").style.display="";
		document.getElementById("CreateOnloadMessage").style.display="none";
		
	} else {
		document.getElementById("content").style.display="";
	  document.getElementById("CreateOnloadMessage").style.display="none";	
		if (DebugMode == 1)	{	
			alert("[!!GetXML Error!!] Function: GetResult_2nd");
		}
	}
}
	
function CheckConnectionStatus() {
  $.ajax({
    cache: false,
    url: "./js/CheckConnection",
    timeout: 5000,
    type: "GET",
    success: function(data) {
    SetXML();
    },
    error: function() {
      document.getElementById("DetectRouterConnection").style.display = "inline";
    }
  });
}


function SaveWan()
{
	
	$.ajax({
		cache: false,
		url: "./js/CheckConnection",
		timeout: 5000,
		type: "GET",
		success: function(data) {
			SetXMLWan();
			//SetXML();
		},
		error: function() {
			document.getElementById("DetectRouterConnection").style.display = "inline";
		}
	});
	
//alert("无错误");

}


//代码中暂时未加入数据有效性检查，直接设置下去，后面需要调整

function SetXMLWan() {
	document.getElementById("CreatePopAlertMessage").style.display = "inline";
	//document.getElementById("waitSettingFinish").style.display = "inline";
	SetResult_1st_Wan();
}

//代码中暂时未加入数据有效性检查，直接设置下去，后面需要调整
function SetResult_1st_Wan() {
	var result_xml = new StringDoc();
	var mac_clone;
	var speed;
	var static_dns;
	var pri_dns;
	var sec_dns;
	
	if (result_xml != null) {
		result_xml.Set("SetWanSettings/wan_wan(0)_enable", "1");
		var proto = document.getElementById("select_networktype").value;
		switch(proto) {
		case "PPPoE":
		case "SpecialDialing":
			result_xml.Set("SetWanSettings/wan_wan(0)_proto", "pppoe");
			if(document.getElementById("select_networktype").value=="PPPoE")
			{
				result_xml.Set("SetWanSettings/wan_wan(0)_pppoe_type", "normal");
			}
			else if(document.getElementById("select_networktype_special").value=="PPPoE_Plus")
			{
				result_xml.Set("SetWanSettings/wan_wan(0)_pppoe_type", "pppoe_plus");
			}
			else if(document.getElementById("select_networktype_special").value=="PPPoE_Dynamic")
			{
				result_xml.Set("SetWanSettings/wan_wan(0)_pppoe_type", "pppoe_dynamic");
			}
			else if(document.getElementById("select_networktype_special").value=="PPPoE_Other1")
			{
				result_xml.Set("SetWanSettings/wan_wan(0)_pppoe_type", "pppoe_other1");
			}			
			else if(document.getElementById("select_networktype_special").value=="PPPoE_Other2")
			{
				result_xml.Set("SetWanSettings/wan_wan(0)_pppoe_type", "pppoe_other2");
			}						
			result_xml.Set("SetWanSettings/wan_wan(0)_pppoe_username", document.getElementById("pppoe_name").value);
			result_xml.Set("SetWanSettings/wan_wan(0)_pppoe_passwd", AES_Encrypt128(document.getElementById("pppoe_psassword1").value));
			result_xml.Set("SetWanSettings/wan_wan(0)_pppoe_service", document.getElementById("pppoe_serviename").value);
			
			result_xml.Set("SetWanSettings/wan_wan(0)_mtu", document.getElementById("mtu").value);
			
			//wan口速率:
			speed = document.getElementById("select_wanspeed").value;
			switch(speed) {
			case "Auto":
				result_xml.Set("SetWanSettings/wan_wan_speed", "Auto");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Auto");
				break;
			case "100Half":
				result_xml.Set("SetWanSettings/wan_wan_speed", "100");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Half");
				break;
			case "100Full":
				result_xml.Set("SetWanSettings/wan_wan_speed", "100");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Full");
				break;
			case "10Half":
				result_xml.Set("SetWanSettings/wan_wan_speed", "10");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Half");
				break;
			case "10Full":
				result_xml.Set("SetWanSettings/wan_wan_speed", "10");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Full");
				break;
			default:
				break;
			}
			//mac clone
			mac_clone = document.getElementById("select_macclone").value;
			switch(mac_clone) {
			case "none":
				result_xml.Set("SetWanSettings/wan_wan(0)_mac_clone_enable", "0");
				break;
			case "pcmac":
				//PC mac
				result_xml.Set("SetWanSettings/wan_wan(0)_mac_clone_enable", "1");
				result_xml.Set("SetWanSettings/wan_wan(0)_clone_mac", current_client_mac);
				break;
			case "manual":
				result_xml.Set("SetWanSettings/wan_wan(0)_mac_clone_enable", "1");
				result_xml.Set("SetWanSettings/wan_wan(0)_clone_mac", document.getElementById("macaddress").value);
				break;
			default:
				break;
			}
			//静态DNS
			static_dns = document.getElementById("dns_enable").checked;
			if (static_dns) {
				result_xml.Set("SetWanSettings/wan_wan(0)_dns_manual", "1");
				pri_dns = document.getElementById("dnssever1").value;
				sec_dns = document.getElementById("dnssever2").value;
				if (sec_dns.length == 0) {
					result_xml.Set("SetWanSettings/wan_wan(0)_dns", pri_dns);
				} else {
					result_xml.Set("SetWanSettings/wan_wan(0)_dns", pri_dns + ';' + sec_dns);
				}
			} else {
				result_xml.Set("SetWanSettings/wan_wan(0)_dns_manual", "0");
				result_xml.Set("SetWanSettings/wan_wan(0)_dns", "");
			}
			//alert(static_dns);
			break;
		case "DHCP":
			result_xml.Set("SetWanSettings/wan_wan(0)_proto", "dhcp");
			//mtu
			result_xml.Set("SetWanSettings/wan_wan(0)_mtu", document.getElementById("mtu").value);
			//wan口速率:
			speed = document.getElementById("select_wanspeed").value;
			switch(speed) {
			case "Auto":
				result_xml.Set("SetWanSettings/wan_wan_speed", "Auto");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Auto");
				break;
			case "100Half":
				result_xml.Set("SetWanSettings/wan_wan_speed", "100");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Half");
				break;
			case "100Full":
				result_xml.Set("SetWanSettings/wan_wan_speed", "100");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Full");
				break;
			case "10Half":
				result_xml.Set("SetWanSettings/wan_wan_speed", "10");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Half");
				break;
			case "10Full":
				result_xml.Set("SetWanSettings/wan_wan_speed", "10");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Full");
				break;
			default:
				break;
			}
			//mac clone
			mac_clone = document.getElementById("select_macclone").value;
			switch(mac_clone) {
			case "none":
				result_xml.Set("SetWanSettings/wan_wan(0)_mac_clone_enable", "0");
				break;
			case "pcmac":
				//PC mac
				result_xml.Set("SetWanSettings/wan_wan(0)_mac_clone_enable", "1");
				result_xml.Set("SetWanSettings/wan_wan(0)_clone_mac", current_client_mac);
				break;
			case "manual":
				result_xml.Set("SetWanSettings/wan_wan(0)_mac_clone_enable", "1");
				result_xml.Set("SetWanSettings/wan_wan(0)_clone_mac", document.getElementById("macaddress").value);
				break;
			default:
				break;
			}
			//静态DNS
			static_dns = document.getElementById("dns_enable").checked;
			if (static_dns) {
				result_xml.Set("SetWanSettings/wan_wan(0)_dns_manual", "1");
				pri_dns = document.getElementById("dnssever1").value;
				sec_dns = document.getElementById("dnssever2").value;
				if (sec_dns.length == 0) {
					result_xml.Set("SetWanSettings/wan_wan(0)_dns", pri_dns);
				} else {
					result_xml.Set("SetWanSettings/wan_wan(0)_dns", pri_dns + ';' + sec_dns);
				}
			} else {
				result_xml.Set("SetWanSettings/wan_wan(0)_dns_manual", "0");
				result_xml.Set("SetWanSettings/wan_wan(0)_dns", "");
			}
			//alert(static_dns);
			break;
		case "Static":
			result_xml.Set("SetWanSettings/wan_wan(0)_proto", "static");
			//ip
			result_xml.Set("SetWanSettings/wan_wan(0)_ipaddr", document.getElementById("staticIpaddr").value);
			//mask
			result_xml.Set("SetWanSettings/wan_wan(0)_netmask", document.getElementById("staticmask").value);
			//gw
			result_xml.Set("SetWanSettings/wan_wan(0)_gateway", document.getElementById("staticgateway").value);
			//dns
			result_xml.Set("SetWanSettings/wan_wan(0)_dns_manual", "1");
			pri_dns = document.getElementById("staticdns1").value;
			sec_dns = document.getElementById("staticdns2").value;
			if (sec_dns.length == 0) {
				result_xml.Set("SetWanSettings/wan_wan(0)_dns", pri_dns);
			} else {
				result_xml.Set("SetWanSettings/wan_wan(0)_dns", pri_dns + ';' + sec_dns);
			}
			//mtu
			result_xml.Set("SetWanSettings/wan_wan(0)_mtu", document.getElementById("mtu").value);
			//wan口速率:
			speed = document.getElementById("select_wanspeed").value;
			switch(speed) {
			case "Auto":
				result_xml.Set("SetWanSettings/wan_wan_speed", "Auto");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Auto");
				break;
			case "100Half":
				result_xml.Set("SetWanSettings/wan_wan_speed", "100");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Half");
				break;
			case "100Full":
				result_xml.Set("SetWanSettings/wan_wan_speed", "100");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Full");
				break;
			case "10Half":
				result_xml.Set("SetWanSettings/wan_wan_speed", "10");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Half");
				break;
			case "10Full":
				result_xml.Set("SetWanSettings/wan_wan_speed", "10");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Full");
				break;
			default:
				break;
			}
			//mac clone
			mac_clone = document.getElementById("select_macclone").value;
			switch(mac_clone) {
			case "none":
				result_xml.Set("SetWanSettings/wan_wan(0)_mac_clone_enable", "0");
				break;
			case "pcmac":
				//PC mac
				result_xml.Set("SetWanSettings/wan_wan(0)_mac_clone_enable", "1");
				result_xml.Set("SetWanSettings/wan_wan(0)_clone_mac", current_client_mac);
				break;
			case "manual":
				result_xml.Set("SetWanSettings/wan_wan(0)_mac_clone_enable", "1");
				result_xml.Set("SetWanSettings/wan_wan(0)_clone_mac", document.getElementById("macaddress").value);
				break;
			default:
				break;
			}
			

			break;
		case "Bridge":
			result_xml.Set("SetWanSettings/wan_wan(0)_proto", "bridge");
			//wan口速率:
			speed = document.getElementById("select_wanspeed").value;
			switch(speed) {
			case "Auto":
				result_xml.Set("SetWanSettings/wan_wan_speed", "Auto");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Auto");
				break;
			case "100Half":
				result_xml.Set("SetWanSettings/wan_wan_speed", "100");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Half");
				break;
			case "100Full":
				result_xml.Set("SetWanSettings/wan_wan_speed", "100");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Full");
				break;
			case "10Half":
				result_xml.Set("SetWanSettings/wan_wan_speed", "10");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Half");
				break;
			case "10Full":
				result_xml.Set("SetWanSettings/wan_wan_speed", "10");
				result_xml.Set("SetWanSettings/wan_wan_duplex", "Full");
				break;
			default:
				break;
			}
			break;
		default:
			break;
		}
		
		// Send HNAP to DUT
		HNAP.SetXMLAsync("SetWanSettings", result_xml, function(xml)	{	SetResult_2nd_Wan(xml);	});
		if( SetDataTimer !=null){//先清除timer
			clearTimeout(SetDataTimer);
		}
		SetDataTimer = setTimeout("waitSettingFinished()", 60*1000);
	} else {	
		if (DebugMode == 1)	{	
			alert("[!!SetXML Error!!] Function: SetResult_1st_Wan");	
		}	
	}
}

function SetResult_2nd_Wan(result_xml) {
	var SetResult_1st_Wan = result_xml.Get("SetWanSettingsResponse/SetWanSettingsResult");
	if (SetResult_1st_Wan == "OK") {
		setTimeout("waitSettingFinished()", 1000);
		if(SetDataTimer !=null ){
			clearTimeout(SetDataTimer);
			SetDataTimer = null;
		}
	}
	if (SetResult_1st_Wan == "ERROR") {
		if (DebugMode == 1) {
		alert("[!!SetXML Error!!] Function: SetResult_2nd_Wan");
		}
		window.location.reload();
	}
}



function waitSettingFinished() 
{
	window.location.reload();
}

$(document).ready( function() {
	document.getElementById("content").style.display="none";
	document.getElementById("CreateOnloadMessage").style.display="";
	basiccontainerminiheigh();
	checkTimeout();
	
	//当按tab输入宽带密码时，提示消失
	$("#pppoe_psassword1").bind('input propertychange',function(){
		document.getElementById("pwdstr1").style.display = "none";
		
	});
	$("#pppoe_psassword2").bind('input propertychange',function(){
		document.getElementById("pwdstr2").style.display = "none";
	});
	
	document.getElementById("pppoe_psassword1").onclick = function()
	{
		document.getElementById("pwdstr1").style.display = "none";
		document.getElementById("pppoepassworddiv1").className="text_eye_divfocus";
	};
	document.getElementById("pppoe_psassword1").onblur = function()
	{
		document.getElementById("pppoe_psassword2").value=this.value;
		document.getElementById("pppoepassworddiv1").className="text_eye_div";
		if (this.value.length == 0)
		{
			document.getElementById("pwdstr1").style.display = "inline";
		}
	};
	
	document.getElementById("pppoe_psassword2").onclick = function()
	{
		document.getElementById("pwdstr2").style.display = "none";
		document.getElementById("pppoepassworddiv2").className="text_eye_divfocus";
	};
	document.getElementById("pppoe_psassword2").onblur = function()
	{
		document.getElementById("pppoe_psassword1").value=this.value;
		document.getElementById("pppoepassworddiv2").className="text_eye_div";
		if (this.value.length == 0)
		{
			document.getElementById("pwdstr2").style.display = "inline";
		}
	};
	GetXML();
	GetLanWanConfilct_1st();//定时检查lan wan冲突
	
	document.getElementById("option_pppoe").innerHTML = I18N("j","Network_PPPoE_Mode");//宽带帐号上网（PPPoE）
	document.getElementById("option_dhcp").innerHTML = I18N("j","Network_DHCP_Mode");//自动获取IP（DHCP）
	document.getElementById("option_staticip").innerHTML = I18N("j","Network_Static_Mode");//手动输入IP（静态IP）
	document.getElementById("option_special_dialing").innerHTML = I18N("j","Network_Special_Dialing");//专属拨号
	document.getElementById("option_pppoe1").innerHTML = I18N("j","Network_PPPoE1");//PPPoE1(河南)
	document.getElementById("option_pppoe2").innerHTML = I18N("j","Network_PPPoE2");//PPPoE2(南昌)
	document.getElementById("option_pppoe3").innerHTML = I18N("j","Network_PPPoE3");//PPPoE3(湖南/湖北)
	document.getElementById("option_pppoe4").innerHTML = I18N("j","Network_PPPoE4");//PPPoE4(湖南/湖北)
	//document.getElementById("option_dhcp_plus").innerHTML = I18N("j","Network_DHCP_Plus");//DHCP Plus(加密模式)
	document.getElementById("option_auto").innerHTML = I18N("j","Network_Auto_Rate");//自动协商
	document.getElementById("option_100Half").innerHTML = I18N("j","Network_100M_Half");//100 Mbps 半双工
	document.getElementById("option_100Full").innerHTML = I18N("j","Network_100M_Full");//100 Mbps 全双工
	document.getElementById("option_10Half").innerHTML = I18N("j","Network_10M_Half");//10 Mbps 半双工
	document.getElementById("option_10Full").innerHTML = I18N("j","Network_10M_Full");//10 Mbps 全双工
	document.getElementById("option_not_macclone").innerHTML = I18N("j","Network_Not_MAC_Clone");//不使用 MAC 克隆
	document.getElementById("option_use_pcmac").innerHTML = I18N("j","Network_Use_PC_MAC");//使用当前终端 MAC 地址
	document.getElementById("option_manualmac").innerHTML = I18N("j","Network_Manual_Input_MAC");//手动输入MAC 地址
	document.getElementById("savebutton").value = I18N("j","Commom_Save");//保存
});

function show_pppoe_emty()//显示间隔
{
	$("#emty_2").show();
	$("#emty_3").show();
	$("#emty_4").show();
	$("#emty_10").show();
	$("#emty_13").show();
	$("#emty_15").show();
}
function show_dhcp_emty()
{
	$("#emty_10").show();
}
function show_static_emty()
{
	$("#emty_5").show();
	$("#emty_6").show();
	$("#emty_7").show();
	$("#emty_8").show();
	$("#emty_9").show();
	$("#emty_10").show();
}

function changnetWorkType()
{
	hideAllErrorInfo();
	var dns_enable_checked;
	var type=document.getElementById("select_networktype").value;
	//alert(type);
	if(type =="PPPoE")
	{ 
		//show_pppoe_emty();
		isStaticType=false;
		crlshow("pppoe_",1,3,true);
		crlshow("emty_",2,4,true);
		crlshow("emty_",5,8,false);
		crlshow("static_",1,5,false);
		crlshow("dhcp_plus_",1,4,false);
		document.getElementById("emty_9").style.display = "none";
		document.getElementById("bridgeinfo").style.display = "none";
		document.getElementById("emty_10").style.display = "";
		document.getElementById("emty_11").style.display = "";
		document.getElementById("emty_12").style.display = "";
		document.getElementById("emty_13").style.display = "";
		document.getElementById("zonemtu").style.display = "";
		document.getElementById("wanspeed_1").style.display = "";
		document.getElementById("macclone_1").style.display = "";
		document.getElementById("DNS_1").style.display = "";
		
		document.getElementById("tr_special_dial_space").style.display = "none";
		document.getElementById("tr_special_dial").style.display = "none";
		
		//页面上面点击静态DNS按钮的时候，并没有更改checkbox的值，而是在ChangeDnsStatus中修改,所以在这里进行取反
		dns_enable_checked = document.getElementById("dns_enable").checked;
		//alert(dns_enable_checked);
		if (dns_enable_checked) {
			document.getElementById("dns_enable").checked = false;
		} else {
			document.getElementById("dns_enable").checked = true;
		}
		
		//
		//alert(wan_proto);
		if (wan_proto != "pppoe")
			document.getElementById("mtu").value = "1480";
		else
			document.getElementById("mtu").value = mtu;
		ChangeDnsStatus();
		changMacClone();
	}
	else if(type == "DHCP")
	{
		//show_dhcp_emty();
		isStaticType=false;
		crlshow("pppoe_",1,3,false);
		crlshow("emty_",2,9,false);
		crlshow("static_",1,5,false);
		crlshow("dhcp_plus_",1,4,false);
		document.getElementById("bridgeinfo").style.display = "none";
		document.getElementById("emty_10").style.display = "";
		document.getElementById("emty_11").style.display = "";
		document.getElementById("emty_12").style.display = "";
		document.getElementById("emty_13").style.display = "";
		document.getElementById("zonemtu").style.display = "";
		document.getElementById("wanspeed_1").style.display = "";
		document.getElementById("macclone_1").style.display = "";
		document.getElementById("DNS_1").style.display = ""; 

		document.getElementById("tr_special_dial_space").style.display = "none";
		document.getElementById("tr_special_dial").style.display = "none";
		dns_enable_checked = document.getElementById("dns_enable").checked;
		//alert(dns_enable_checked);
		if (dns_enable_checked) {
			document.getElementById("dns_enable").checked = false;
		} else {
			document.getElementById("dns_enable").checked = true;
		}
		if (wan_proto != "dhcp")
			document.getElementById("mtu").value = "1500";
		else
			document.getElementById("mtu").value = mtu;
		ChangeDnsStatus();
		changMacClone();
	}
	else if(type == "Static")
	{
		//show_static_emty();
		isStaticType=true;
		crlshow("pppoe_",1,3,false);
		crlshow("emty_",2,4,false);
		crlshow("emty_",5,9,true);
		crlshow("static_",1,5,true); 
		crlshow("dhcp_plus_",1,4,false);
		document.getElementById("bridgeinfo").style.display = "none";
		document.getElementById("emty_10").style.display = "";
		document.getElementById("emty_11").style.display = "";
		document.getElementById("emty_12").style.display = "none";
		document.getElementById("emty_13").style.display = "none";
		document.getElementById("emty_14").style.display = "none";
		document.getElementById("emty_15").style.display = "none";
		document.getElementById("zonemtu").style.display = "";
		document.getElementById("wanspeed_1").style.display = "";
		document.getElementById("macclone_1").style.display = "";
		document.getElementById("DNS_1").style.display = "none"; 
		document.getElementById("DNS_2").style.display = "none";
		document.getElementById("DNS_3").style.display = "none"; 

		document.getElementById("tr_special_dial_space").style.display = "none";
		document.getElementById("tr_special_dial").style.display = "none";
		if (wan_proto != "static")
			document.getElementById("mtu").value = "1500";
		else
			document.getElementById("mtu").value = mtu;
		changMacClone();
	}
	else if(type == "Bridge")
	{
		crlshow("pppoe_",1,3,false);
		crlshow("emty_",2,4,false);
		crlshow("emty_",4,9,false);
		crlshow("static_",1,5,false); 
		crlshow("dhcp_plus_",1,4,false);
		document.getElementById("bridgeinfo").style.display = "";
		document.getElementById("emty_10").style.display = "none";
		document.getElementById("emty_11").style.display = "none";
		document.getElementById("emty_12").style.display = "none";
		document.getElementById("emty_13").style.display = "none";
		document.getElementById("emty_14").style.display = "none";
		document.getElementById("emty_15").style.display = "none";
		document.getElementById("zonemtu").style.display = "none";
		document.getElementById("wanspeed_1").style.display = "none";
		document.getElementById("macclone_1").style.display = "none";
		document.getElementById("macclone_2").style.display = "none";
		document.getElementById("DNS_1").style.display = "none";
		document.getElementById("DNS_2").style.display = "none";
		document.getElementById("DNS_3").style.display = "none";  
		
		document.getElementById("tr_special_dial_space").style.display = "none";
		document.getElementById("tr_special_dial").style.display = "none";
	}
	else if(type == "SpecialDialing")
	{
		isStaticType=false;
		crlshow("pppoe_",1,3,true);
		crlshow("emty_",2,4,true);
		crlshow("emty_",5,8,false);
		crlshow("static_",1,5,false);
		crlshow("dhcp_plus_",1,4,false);
		document.getElementById("emty_9").style.display = "none";
		document.getElementById("bridgeinfo").style.display = "none";
		document.getElementById("emty_10").style.display = "";
		document.getElementById("emty_11").style.display = "";
		document.getElementById("emty_12").style.display = "";
		document.getElementById("emty_13").style.display = "";
		document.getElementById("zonemtu").style.display = "";
		document.getElementById("wanspeed_1").style.display = "";
		document.getElementById("macclone_1").style.display = "";
		document.getElementById("DNS_1").style.display = "";
		
		document.getElementById("tr_special_dial_space").style.display = "";
		document.getElementById("tr_special_dial").style.display = "";
		
		//页面上面点击静态DNS按钮的时候，并没有更改checkbox的值，而是在ChangeDnsStatus中修改,所以在这里进行取反
		dns_enable_checked = document.getElementById("dns_enable").checked;

		if (dns_enable_checked) {
			document.getElementById("dns_enable").checked = false;
		} else {
			document.getElementById("dns_enable").checked = true;
		}
		
		if (wan_proto != "pppoe")
			document.getElementById("mtu").value = "1480";
		else
			document.getElementById("mtu").value = mtu;
		ChangeDnsStatus();
		changMacClone();
	}
}

function crlshow(str,start,end,flag)
{
	if(flag==true)
	{
		for(var i=start;i<=end;i++)
		{
		 var id=str+i;
		 document.getElementById(id).style.display = "";
		}
	}
	else
	{
		for(var i=start;i<=end;i++)
		{
		 var id=str+i;
		 document.getElementById(id).style.display = "none";
		}	
	}



}

function changMacClone()
{
	//hideAllErrorInfo();
	var macclone=document.getElementById("select_macclone").value;
	var type=document.getElementById("select_networktype").value;
	
	if(type != "Bridge")
	{
		if(macclone=="none" || macclone=="pcmac")
		{
			isManualMacSelect=false;
			document.getElementById("macclone_2").style.display = "none";
			document.getElementById("emty_12").style.display = "none";
			document.getElementById("error_10").style.display = "none";
			document.getElementById("emty_13").style.display = "";
		
		}
		if(macclone=="manual")
		{
			//$("#macaddress").val("");//若选择手动保存后，显示值
			isManualMacSelect=true;
			document.getElementById("macclone_2").style.display = "";
			document.getElementById("emty_12").style.display = "";
			
		}		
	}

}

function passwordType(tag)
{
	if(tag==0)//显示密码
	{
		document.getElementById("pppoepassworddiv1").style.display="none";
		document.getElementById('pppoepassworddiv2').style.display="";
		if (document.getElementById("pppoe_psassword2").value.length == 0)
		{
			document.getElementById("pwdstr2").style.display = "inline";
		}
		else
		{
			document.getElementById("pwdstr2").style.display = "none";
		}
	}
	else//隐藏密码
	{
		if (document.getElementById("pppoe_psassword1").value.length == 0)
		{
			document.getElementById("pwdstr1").style.display = "inline";
		}
		else
		{
			document.getElementById("pwdstr1").style.display = "none";
		}
		document.getElementById('pppoepassworddiv1').style.display="";
		document.getElementById('pppoepassworddiv2').style.display="none";
	}
}	

function ChangeDnsStatus()
{ 
	var a = document.getElementById("dns_enable").checked;
	
	if(a)
	{
		document.getElementById("dns_statue").className = "checkbox_off";
		document.getElementById("dns_enable").checked=false;
		document.getElementById("DNS_2").style.display = "none";
		document.getElementById("DNS_3").style.display = "none";
		document.getElementById("emty_14").style.display = "none";
		document.getElementById("emty_15").style.display = "none";
		isStaicDNSSelect=false;
		//hideAllErrorInfo();
		$("#error_11").hide();
		$("#error_12").hide();
		
	}
	else
	{
		document.getElementById("dns_statue").className = "checkbox_on";
		document.getElementById("dns_enable").checked=true;  
		document.getElementById("DNS_2").style.display = "";
		document.getElementById("DNS_3").style.display = "";
		document.getElementById("emty_14").style.display = "";
		document.getElementById("emty_15").style.display = "";
		isStaicDNSSelect=true;
	}
}


	
function hideAllErrorInfo()
{
	document.getElementById("error_1").style.display = "none"; 
	document.getElementById("error_2").style.display = "none"; 
	document.getElementById("error_3").style.display = "none"; 
	document.getElementById("error_4").style.display = "none"; 
	document.getElementById("error_5").style.display = "none"; 
	document.getElementById("error_6").style.display = "none"; 
	document.getElementById("error_7").style.display = "none"; 
	document.getElementById("error_8").style.display = "none"; 
	document.getElementById("error_9").style.display = "none"; 
	document.getElementById("error_10").style.display = "none"; 
	document.getElementById("error_11").style.display = "none"; 
	document.getElementById("error_12").style.display = "none"; 
	//document.getElementById("error_13").style.display = "none"; 
	//document.getElementById("error_14").style.display = "none"; 
}
function checkWanSetValues()
{
	hideAllErrorInfo();
	var type=document.getElementById("select_networktype").value;
	var result;
	var MtuValue=$("#mtu").val();/*MTU值获取pppoe、DHCP、Static三种相同*/
	var MacCloneValue=$("#macaddress").val();/*MAC地址pppoe、DHCP、Static获取三种相同*/
	
	
	if(type=="PPPoE" || type=="SpecialDialing")
	{
		//hideAllErrorInfo();
		//show_pppoe_emty();
		var pppoeName=document.getElementById("pppoe_name").value;
		var pppoePassword=document.getElementById("pppoe_psassword1").value;
		var pppoeServiceName=$("#pppoe_serviename").val();
		//show_pppoe_emty();
		
		if(pppoeName=="")
		 {
			//$("#emty_2").hide();
			showErr("error_1","errorinfo_1",I18N("j","Err_Network_pppoeNameEmpty"));
			return false;
		 }
		else if(CORRECT!=checkSpecialInputStr(pppoeName))
		{
			//$("#emty_2").hide();
			showErr("error_1","errorinfo_1",I18N("j","Err_Network_pppoeNameSpecialStr"));
			return false;
		}
		 else if(CORRECT!=checkInputStr(pppoeName))
		 {
			//$("#emty_2").hide();
			showErr("error_1","errorinfo_1",I18N("j","Err_Network_pppoeNameSpace"));
			return false;
		 }
		var pppoeName_length = pppoeName.replace(/[^\x00-\xFF]/g, "xxx").length;
		if(pppoeName_length > 32)
		{
			//$("#emty_2").hide();
			showErr("error_1","errorinfo_1",I18N("j","Err_Network_pppoeUserLen"));
			return false;
		}
		if(!checkDoubleByteStr(pppoePassword))//不含汉字、￥等双字节字符
		{
			switch(checkInputStr(pppoePassword))
			{
				case ERR_INPUT_EMPTY:
					//$("#emty_3").hide();
					showErr("error_2","errorinfo_2",I18N("j","Err_Network_pppoePswNull"));
					return false;
				case ERR_INPUT_INVALID://不能含有空格
					//$("#emty_3").hide();
					showErr("error_2","errorinfo_2",I18N("j","Err_Network_pppoePwdSpace"));
					return false;
				default:
					if(!isKeyboardInput(pppoePassword))
					{
						//$("#emty_3").hide();
						showErr("error_2","errorinfo_2",I18N("j","Err_Network_pppoePwdCharValid"));
						return false;
					}
					break;
			}
		}
		else
		{	
			//$("#emty_3").hide();
			showErr("error_2","errorinfo_2",I18N("j","Err_Network_pppoePwdCharValid"));
			return false;
		}
		
		if(pppoeServiceName!="")
		{
			if( CORRECT!=checkInputStrBeginendSpace(pppoeServiceName) )/*检查空格*/
			{
				//hideAllErrorInfo();
				//$("#emty_4").hide();
				showErr("error_3","errorinfo_3",I18N("j","Err_Network_pppoeSerName"));
				return false;
			}
			if(CORRECT!=checkSpecialInputStr(pppoeServiceName))//不能输入逗号和分号
			{
				//$("#emty_4").hide();
				showErr("error_3","errorinfo_3",I18N("j","Err_Network_pppoeSerNameInvalid"));
				return false;
			}
			var len = pppoeServiceName.replace(/[^\x00-\xFF]/g, "xxx").length;
			if(len > 32)
			{
				//$("#emty_4").hide();
				showErr("error_3","errorinfo_3",I18N("j","Err_Network_pppoeSerNameLength"));
				return false;
			}
		}
		if(""==MtuValue || CORRECT !=verifyMTU(MtuValue,576,1492))//pppoe的MTU为576-1492之间与DHCP不同
		{
			//hideAllErrorInfo();
			//$("#emty_10").hide();
			showErr("error_9","errorinfo_9",I18N("j","Err_Network_pppoeMtu"));
		 	return false;
		}
		
	}//end of pppoe
	if(type=="DHCP")
	{
		//hideAllErrorInfo();
		//show_dhcp_emty();
		if(""==MtuValue || CORRECT !=verifyMTU(MtuValue,576,1500))//DHCP的MTU为576-1500之间与pppoe不同
		 {
			//$("#emty_10").hide();
			showErr("error_9","errorinfo_9",I18N("j","Err_Network_DhcpcMtu"));
		 	return false;
		 }
	}
	if(type=="Static")
	{
		//hideAllErrorInfo();
		//show_static_emty();
		var StaticIpValue=$("#staticIpaddr").val();
		var StaticMaskValue=$("#staticmask").val();
		var StaticGatewayValue=$("#staticgateway").val();
		var StaticDNS1Value=$("#staticdns1").val();
		var StaticDNS2Value=$("#staticdns2").val();

		if(CORRECT!=(result=checkIpAddr(StaticIpValue)))//检查IP
		{
			//$("#emty_5").hide();
			switch(result)
			{
				case ERR_IP_EMPTY:
					showErr("error_4","errorinfo_4",I18N("j","Err_Network_StaticIPNULL"));
					return false;
				case ERR_IP_NOTNUMBER:
					showErr("error_4","errorinfo_4",I18N("j","Err_Network_StaticIPNONUMBER"));
					return false;
				case ERR_IP_FORMAT:
					showErr("error_4","errorinfo_4",I18N("j","Err_Network_IpAddrFormat"));
					return false;
				case ERR_IP_ALLZERO:
					showErr("error_4","errorinfo_4",I18N("j","Err_Network_IpAddrAllZero"));
					return false;
				case ERR_IP_ALLONE:
					showErr("error_4","errorinfo_4",I18N("j","Err_Network_IpAddrAllOne"));
					return false;
				case ERR_IP_INVALID:
					showErr("error_4","errorinfo_4",I18N("j","Err_Network_StaticIpNet"));
					return false;
				case ERR_IP_FIRSTZERO:
					showErr("error_4","errorinfo_4",I18N("j","Err_Network_IpAddrFirstZero"));
					return false;
				case ERR_IP_LOOP:
					showErr("error_4","errorinfo_4",I18N("j","Err_Network_IpAddrLoop"));
					return false;
				case ERR_IP_GROUP:
					showErr("error_4","errorinfo_4",I18N("j","Err_Network_IpAddrGroup"));
					return false;
				default:
					break;
			}
		}
		if(lanGatewayip==StaticIpValue)
		{
			showErr("error_4","errorinfo_4",I18N("j","Err_Network_IpAddrSameLan"));
			return false;
		}
		if(guestip==StaticIpValue)
		{
			showErr("error_4","errorinfo_4",I18N("j","Err_Network_IpAddrSameGuest"));
			return false;
		}
		switch(result=isValidMask(StaticMaskValue))//检查Mask格式是否正确
		{
			case ERR_MASK_EMPTY:
				//$("#emty_6").hide();
				showErr("error_5","errorinfo_5",I18N("j","Err_Network_StaticMaskNull"));//空mask
				return false;
			case CORRECT:
			
				var IpMaskResult=checkIpMaskMatch(StaticIpValue,StaticMaskValue);
				
				if(ERR_NETID_INV==IpMaskResult)//用mask检查IP，网络号全0或1
				{
					//$("#emty_5").hide();
					showErr("error_4","errorinfo_4",I18N("j","Err_Network_StaticNetId"));
					return false;
				}
			
				if(ERR_IPMASK_MATCH==IpMaskResult)//IP和mask不匹配
				{
					//$("#emty_5").hide();
					showErr("error_4","errorinfo_4",I18N("j","Err_Network_StaticIpMaskNotMatch"));
					return false;
				}
				
				if(ERR_HOSTID_INV==IpMaskResult)//用mask检查IP，主机号全0或1
				{
					//$("#emty_5").hide();
					showErr("error_4","errorinfo_4",I18N("j","Err_Network_StaticHostId"));
					return false;
				}
				break;
			default:
				//$("#emty_6").hide();
				showErr("error_5","errorinfo_5",I18N("j","Err_Network_StaticMask"));
				return false;
		}
		
		//lan口ip和wan冲突检测
		var lanmask_Int=transIptoInt(lanGatewaymask);//将lanmask转换成整数
		var wanmask_Int=transIptoInt(StaticMaskValue);//将wanmask转换成整数
		var checkmask=( lanmask_Int < wanmask_Int ? lanGatewaymask: StaticMaskValue);//取得较小者
		if(isSameNet(StaticIpValue,lanGatewayip,checkmask)!=ERR_IP_DIFFNET)
		{
			//$("#emty_5").hide();
			showErr("error_4","errorinfo_4",I18N("j","Err_Network_StaticIpLanConflict"));
			return false;
		}
		
		//访客网络ip和wan冲突检测
		var guestmask_Int=transIptoInt(guestmask);//将guest mask转换成整数
		var checkguestmask=( guestmask_Int < wanmask_Int ? guestmask: StaticMaskValue);//取得较小者
		if(isSameNet(StaticIpValue,guestip,checkguestmask)!=ERR_IP_DIFFNET)
		{
			//$("#emty_5").hide();
			showErr("error_4","errorinfo_4",I18N("j","Err_Network_IpAddrSameGuestNet"));
			return false;
		}
		
		switch(result=checkIpAddr(StaticGatewayValue))//检查网关
		{
				case ERR_IP_EMPTY:
					//$("#emty_7").hide();
					showErr("error_6","errorinfo_6",I18N("j","Err_Network_StaticGatewayNull"));
					return false;
				case CORRECT:
					var gatewayResult=checkIpMaskMatch(StaticGatewayValue,StaticMaskValue);
					if(ERR_NETID_INV==gatewayResult)//用mask检查网关，网络号全0或1
					{
						//$("#emty_7").hide();
						showErr("error_6","errorinfo_6",I18N("j","Err_Network_StaticGatewayNetId"));
						return false;
					}
					if(ERR_IPMASK_MATCH==gatewayResult)//网关和mask不匹配
					{
						//$("#emty_7").hide();
						showErr("error_6","errorinfo_6",I18N("j","Err_Network_StaticGateway"));
						return false;
					}
					
					if(ERR_HOSTID_INV==gatewayResult)//用mask检查网关，主机号全0或1
					{
						//$("#emty_7").hide();
						showErr("error_6","errorinfo_6",I18N("j","Err_Network_StaticGatewayHostId"));
						return false;
					}					
					//验证IP和填写的默认网关是否在同一子网或相同
					if(StaticIpValue == StaticGatewayValue)
					{
						//$("#emty_7").hide();
						showErr("error_6","errorinfo_6",I18N("j","Err_Network_StaticIPGatewaySame"));
						return false;
					}
					/*if(SAMESUBNET!=isSameNet(StaticIpValue,StaticGatewayValue,StaticMaskValue))
					{
						//$("#emty_7").hide();
						showErr("error_6","errorinfo_6",I18N("j","Err_Network_StaticIPGatewayNotMatch"));
						return false;
					}*/
					break;
				default:
					//$("#emty_7").hide();
					showErr("error_6","errorinfo_6",I18N("j","Err_Network_StaticGateway"));
					return false;
		}

		if(""==StaticDNS1Value)
		{
			//$("#emty_8").hide();
			showErr("error_7","errorinfo_7",I18N("j","Err_Network_PrimDnsNULL"));
			return false;
			/*
			if(""!=StaticDNS2Value && CORRECT!=checkIpAddr(StaticDNS2Value))
			{
				showErr("error_8","errorinfo_8",I18N("j","Err_Network_SecDns"));
				return false;
			}
			*/
		}
		else if(CORRECT!=checkIpAddr(StaticDNS1Value))
		{
			//$("#emty_8").hide();
			showErr("error_7","errorinfo_7",I18N("j","Err_Network_PrimDns"));
			/*
			if(""!=StaticDNS2Value && CORRECT!=checkIpAddr(StaticDNS2Value))
			{
				$("#emty_9").hide();
				showErr("error_8","errorinfo_8",I18N("j","Err_Network_SecDns"));
			}
			*/
			return false;
		}
		else if(""!=StaticDNS2Value && CORRECT!=checkIpAddr(StaticDNS2Value))
		{
			//$("#emty_9").hide();
			showErr("error_8","errorinfo_8",I18N("j","Err_Network_SecDns"));
			return false;
		}
		else if(StaticDNS1Value==StaticDNS2Value)
		{
			//$("#emty_9").hide();
			showErr("error_8","errorinfo_8",I18N("j","Err_Network_SameDns"));
			return false;
		}
		
		
		if(""==MtuValue || CORRECT !=verifyMTU(MtuValue,576,1500))//MTU为576-1500之间与pppoe不同
		 {
			//$("#emty_10").hide();
			showErr("error_9","errorinfo_9",I18N("j","Err_Network_DhcpcMtu"));
		 	return false;
		 }
		
	}//end of static type

	if(isManualMacSelect && CORRECT!=(result=checkMacAddr(MacCloneValue)))//如果选择手动输入MAC
	{
		//hideAllErrorInfo();
		//$("#emty_13").hide();
		switch(result)
		{
			case ERR_MAC_FORMAT:
				showErr("error_10","errorinfo_10",I18N("j","Err_Network_MacFormat"));
				return false;
			case ERR_MAC_GROUP:
				showErr("error_10","errorinfo_10",I18N("j","Err_Network_MacGroup"));
				return false;
			case ERR_MAC_ZERO:
				showErr("error_10","errorinfo_10",I18N("j","Err_Network_MacZero"));
				return false;
			case ERR_MAC_BROAD:
				showErr("error_10","errorinfo_10",I18N("j","Err_Network_MacBroad"));
				return false;
			case ERR_MAC_EMPTY:
				showErr("error_10","errorinfo_10",I18N("j","Err_Network_PPPoeMacNull"));
				return false;
			default:
				break;
		}
	}
	if(isManualMacSelect && lanmac == MacCloneValue)
	{
		//$("#emty_13").hide();
		showErr("error_10","errorinfo_10",I18N("j","Err_Network_MaccloneSameLan"));
		return false;
	}
	if(isStaicDNSSelect && !isStaticType)//如果选择静态DNS
	{
		var PrimaryDNS=$("#dnssever1").val();
		var SecondDNS=$("#dnssever2").val();
		if(""==PrimaryDNS)
		{
			//$("#emty_15").hide();
			showErr("error_11","errorinfo_11",I18N("j","Err_Network_PrimDnsNULL"));
			return false;
			/*
			if(""!=SecondDNS && CORRECT!=checkIpAddr(SecondDNS))
			{
				showErr("error_12","errorinfo_12",I18N("j","Err_Network_SecDns"));
				return false;
			}
			*/
		}
		else if(CORRECT!=checkIpAddr(PrimaryDNS))
		{
			//$("#emty_15").hide();
			showErr("error_11","errorinfo_11",I18N("j","Err_Network_PrimDns"));
			/*
			if(""!=SecondDNS && CORRECT!=checkIpAddr(SecondDNS))
			{
				showErr("error_12","errorinfo_12",I18N("j","Err_Network_SecDns"));
			}
			*/
			return false;
		}
		else if(""!=SecondDNS && CORRECT!=checkIpAddr(SecondDNS))
		{
			//$("#emty_15").hide();
			showErr("error_12","errorinfo_12",I18N("j","Err_Network_SecDns"));
			return false;
		}
		else if(PrimaryDNS==SecondDNS)
		{
			//$("#emty_15").hide();
			showErr("error_12","errorinfo_12",I18N("j","Err_Network_SameDns"));
			return false;
		}
	}
	return true;


}

function GetLanWanConfilct_1st()
{
	var result_xml = new StringDoc();
	if(result_xml != null)
	{
		result_xml.Set("GetMultipleHNAPs/GetSysStatus");//wan ip
		result_xml.Set("GetMultipleHNAPs/GetWanplugInfo");
		HNAP.SetXMLAsync("GetMultipleHNAPs", result_xml, function(xml)	{	GetLanWanConfilct_2nd(xml);	});
	}
	else 	{	if (DebugMode == 1)	{	alert("[!!GetXML Error!!] Function: GetLanWanConfilct_1st");	}	}
}

function GetLanWanConfilct_2nd(result_xml)
{
	var GetWanIPResult = result_xml.Get("GetMultipleHNAPsResponse/GetMultipleHNAPsResult");
	if(GetWanIPResult == "OK")
	{
		var type = result_xml.Get("GetMultipleHNAPsResponse/GetWanplugInfoResponse/wan_status");
		
		var networkproto = result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_proto");
		var ret = "";
		if(networkproto == "pppoe"){
			var pppoedialtype = result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_pppoe_type");
			ret = getArray1(pppoedialtype,protoWan);
			if(result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_ipaddr") != ""){
				document.getElementById("td_PPPoE_Status").innerHTML = I18N("j","RouterInfo_PPPoE_Successful");//拨号成功
			}
			else
			{
				var pppoestatus = result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_pppoe_status");
				if(pppoestatus == "8"){
					document.getElementById("td_PPPoE_Status").innerHTML = I18N("j","RouterInfo_Connection_Failed") + pppoestatus +")";//拨号连接失败
				}
				else if(pppoestatus == "10"){
					document.getElementById("td_PPPoE_Status").innerHTML = I18N("j","RouterInfo_Negotiation_Failed") + pppoestatus +")";//拨号协商失败
				}
				else if(pppoestatus == "19"){
					document.getElementById("td_PPPoE_Status").innerHTML = I18N("j","RouterInfo_Authenticate_Failed") + pppoestatus +")";//帐号验证失败
				}
				else if(pppoestatus == "100"){
					document.getElementById("td_PPPoE_Status").innerHTML = I18N("j","RouterInfo_Dialing");//正在拨号中...
				}
				else{
					document.getElementById("td_PPPoE_Status").innerHTML = I18N("j","RouterInfo_Other_Failed") + pppoestatus +")";//未知的错误
				}
			}
		}
		else{
			ret = getArray1(networkproto,protoWan);
		}
		if (ret != -1)
				document.getElementById("networktypeinfo").innerHTML = ret;
		
		if (result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_ipaddr") == "") {
			//document.getElementById("ipinfo").innerHTML = "无法获取IP地址";
			document.getElementById("ipinfo").innerHTML = I18N("j","RouterInfo_IP_Empty");
		} else {
			document.getElementById("ipinfo").innerHTML = result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_ipaddr");		
		}
		
		if (result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_netmask") == "") {
			//document.getElementById("networkmaskinfo").innerHTML = "无法获取子网掩码";
			document.getElementById("networkmaskinfo").innerHTML = I18N("j","Network_Mask_Empty");
		} else {
			document.getElementById("networkmaskinfo").innerHTML = result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_netmask");		
		}
		
		if (result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_gateway") == "") {
			//document.getElementById("gatewayinfo").innerHTML = "无法获取网关地址";
			document.getElementById("gatewayinfo").innerHTML = I18N("j","RouterInfo_Gateway_Empty");
		} else {
			document.getElementById("gatewayinfo").innerHTML = result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_gateway");		
		}
		
		if (result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_dns") == "") {
			//document.getElementById("DNSinfo").innerHTML = "无法获取DNS地址";
			document.getElementById("DNSinfo").innerHTML = I18N("j","Home_DNS_Empty");
		} else {
			document.getElementById("DNSinfo").innerHTML = result_xml.Get("GetMultipleHNAPsResponse/GetSysStatusResponse/wan_wan(0)_dns");		
		}
		
		if(type == "3")
		{
			if(timer1!=null){clearTimeout(timer1);timer1=null;}
			if(timer2!=null){clearTimeout(timer2);timer2=null;}
			window.location.href = "Problem_Conflict.html";
		}
		else
		{	
			if(time >= 15000)
			{
				if(timer2!=null)
				{
					clearTimeout(timer2);
					timer2=null;
				}
				timer1=setTimeout("GetLanWanConfilct_1st()", 15000);//15s后判断一次lan wan冲突
			}
			else 
			{
				time+=2000;
				timer2=setTimeout("GetLanWanConfilct_1st()", time);//2s后判断一次lan wan冲突
			}
		}
	}
	else {if (DebugMode == 1)	{	alert("[!!GetXML Error!!] Function: GetLanWanConfilct_2nd");	}	}
}

function SubmitWan()
{
	//alert("SubmitWan");
	var ret;
	ret = checkWanSetValues();
	if (ret) {
		if(timer1!=null){clearTimeout(timer1);timer1=null;}
		if(timer2!=null){clearTimeout(timer2);timer2=null;}
		SaveWan();
	}
}

function changnetWorkType_special()
{
	var type=document.getElementById("select_networktype_special").value;
	if(type == "DHCPPlus")
	{
		crlshow("dhcp_plus_",1,4,true);
		crlshow("emty_",2,4,false);
		crlshow("pppoe_",1,3,false);
	}
	else
	{
		crlshow("dhcp_plus_",1,4,false);
		crlshow("emty_",2,4,true);
		crlshow("pppoe_",1,3,true);
	}
}

function DetectNetworkType()
{
  document.getElementById("auto_detect_result").style.display="none";
  document.getElementById("networkcontent").style.display="none";
  document.getElementById("auto_detect_content").style.display="";
  $.ajax({
    cache: false,
    url: "./js/CheckConnection",
    timeout: 5000,
    type: "GET",
    success: function(data) {
    DetectSetXML();
    },
    error: function() {
    }
  });
}

function DetectSetXML()
{
	GetDetectResult();
}

function GetDetectResult()
{

	var result_xml = new StringDoc();
	if (result_xml != null)
	{
		result_xml.Set("GetWanConnectionType");
		HNAP.SetXMLAsync("GetWanConnectionType", result_xml, function(xml)	{	GetDetectResult_2nd(xml);	});
	}
	else	{	if (DebugMode == 1)	{	alert("[!!GetXML Error!!] Function: GetDetectResult");	}	}
}

function GetDetectResult_2nd(result_xml)
{
	var GetResult_2nd = result_xml.Get("GetWanConnectionTypeResponse/GetWanConnectionTypeResult");
	if (GetResult_2nd == "OK"){
		
		
		var result = result_xml.Get("GetWanConnectionTypeResponse/wan_wan(0)_proto_probe");
		if(result=="0")
		{
			setTimeout("GetDetectResult()", 1000);
		}
		else
		{
			document.getElementById("networkcontent").style.display = "";
			document.getElementById("auto_detect_content").style.display = "none";
			document.getElementById("auto_detect_result").style.display="";
			if(result=="pppoe")
				{
					document.getElementById("detect_sucess").style.display = "";
					document.getElementById("detect_fail").style.display = "none";
					
					document.getElementById("select_networktype").value="PPPoE";
					document.getElementById("networktypespan").innerHTML="宽带拨号上网（PPPoE）";
				 }
			
				else if(result=="dhcp")
				{
					document.getElementById("detect_sucess").style.display = "";
					document.getElementById("detect_fail").style.display = "none";
					//document.getElementById("get_configure_sucess").style.display = "none";
					document.getElementById("select_networktype").value="DHCP";
					document.getElementById("networktypespan").innerHTML="自动获取IP（DHCP）";		
				 }
				 else if(result=="static")
				{
					document.getElementById("detect_sucess").style.display = "";
					document.getElementById("detect_fail").style.display = "none";
					//document.getElementById("get_configure_sucess").style.display = "none";
					document.getElementById("select_networktype").value="Static";
					document.getElementById("networktypespan").innerHTML="手动输入IP（静态IP）";				
				 }	 
				
				 else
				 {
					document.getElementById("detect_sucess").style.display = "none";
					document.getElementById("detect_fail").style.display = "";
					//document.getElementById("get_configure_sucess").style.display = "none";
					document.getElementById("select_networktype").value="PPPoE";
					document.getElementById("networktypespan").innerHTML="手动输入IP（静态IP）";		
				 }
				 	$("#select_networktype").selectbox('detach');
					$("#select_networktype").selectbox();
					 changnetWorkType();

		}
		

		
	} else {	
		if (DebugMode == 1)	{	
			alert("[!!GetXML Error!!] Function: GetDetectResult_2nd");
		}
	}
}



</script>
</head>

<body>
<!-------------------- Logo menu------------------------->
	<div class="wrapper"> 
	<div id="header"></div>

	<div class="clearboth" align="center" id="content" style="display:none; ">
	  <div class="basiccontainer" align="center" id="basiccontent">
	 	 <div id="wanfinfo">
		  <div class="clearboth headerline" align="left">
			<script>I18N("h","Network_Internet_Information");</script><!-- 上网信息 -->
		  </div>
		  <div class="line clearboth"></div>
		  <div align="left">
		  <table border="0" cellspacing="0" cellpadding="0" align="left" class="wantableinfo">
		  	<tbody>
			<tr>
				<th><script>I18N("h","Network_Current_Internet_Mode");</script><!-- 当前上网方式 : --></th>
				<td id="networktypeinfo"></td>
			</tr>
			<tr>
				<th><script>I18N("h","Network_IP_Address");</script><!-- IP地址 : --></th>
				<td id="ipinfo"></td>
			</tr>			
			<tr>
				<th><script>I18N("h","Network_Sub_Mask");</script><!-- 子网掩码 : --></th>
				<td id="networkmaskinfo"></td>
			</tr>				
			<tr>
				<th><script>I18N("h","Network_Gateway");</script><!-- 默认网关 : --></th>
				<td id="gatewayinfo"></td>
			</tr>				
			<tr>
				<th>DNS :</th>
				<td id="DNSinfo"></td>
			</tr>
			<tr id="tr_PPPoE_Status" style="display:none;">
				<th><script>I18N("h","RouterInfo_PPPoE_Status_Network");</script><!-- 拨号状态 : --></th>
				<td id="td_PPPoE_Status"></td>
			</tr>
			</tbody>
		  
		  
		  </table>
		  </div>
		  <div class="clearboth"> </div>
		</div>
		
		<div style="">
		  <div class="clearboth headerline" align="left">
			<script>I18N("h","Network_Wan_Settings");</script><!-- 上网设置(WAN) -->
		  </div>
		  <div class="line clearboth"></div>
		  <div class="tablecontent clearboth" id="networkcontent">
		<div align="left">
			<div style="margin-left:160px; margin-bottom:12px; color:#666666; font-size:14px; display:none;" id="auto_detect_result">
				<div id="detect_sucess" style=" display:none;"><div class="pull-left"><img src="image/icon_hint_succeed.png" width="16" height="16" style=" "></div><div class="pull-left" style="padding-left:8px; width:350px; "><span>探测完成，当前上网方式为</span><span id="networktypespan"></span><span>，系统已为您自动选择。</span></div></div>
				<div id="detect_fail" style="display:none; "><div class="pull-left"><img src="image/icon_hint_defeated.png" width="16" height="16" style=" "></div><div class="pull-left" style="padding-left:8px; "><span>探测失败，您可以手动选择上网方式或者</span><span style="text-decoration:underline;color:#4598aa; font-size:14px; font-weight:bold;cursor:pointer" onclick="DetectNetworkType(); ">重新进行探测</span></div></div>
				<div class="clearboth"> </div>
			</div>
		  <table border="0" class="mainblock clearboth" cellpadding="0" cellspacing="0" align="left" style="">
			<tbody>
			  <tr>
				<th>
				  <script>I18N("h","Network_Internet_Mode");</script><!-- 上网方式: -->
				</th>
				<td>
				 <select name="select_networktype" id="select_networktype" onChange="changnetWorkType();">
					<!-- <option value="PPPoE">宽带账号上网（PPPoE）</option>
					<option value="DHCP">自动获取IP（DHCP）</option>
					<option value="Static">手动输入IP（静态IP）</option> -->
					<option id="option_pppoe" value="PPPoE"></option>
					<option id="option_dhcp" value="DHCP"></option>
					<option id="option_staticip" value="Static"></option>
					<option id="option_special_dialing" value="SpecialDialing"></option>
					<!-- <option value="Bridge">桥接（Bridge）</option> -->
				 </select>
				</td>
				<td><div><span style="text-decoration:underline;color:#4598aa; font-size:14px;;cursor:pointer; " onClick="DetectNetworkType();" >自动探测</span></div></td>
			  </tr>
			  </tbody>
			  </table>
			  <table border="0" class="mainblock clearboth" cellpadding="0" cellspacing="0" align="left" style="width:444px;">
			  <tbody>
			  <tr id="bridgeinfo" style="display:none; "><td colspan="2"  ><span style="font-family:'Applied Font Regular', 'Applied Font';">路由器切换到桥接模式后，后续可通过访问 http://172.16.6.102 页面管理本设备。同时，请确认上行路由器维护 IP 地址不是172.16.6.102，避免 IP 冲突导致网络异常。</span></td></tr>
			  <tr class="space" id="tr_special_dial_space" style="display:none;"></tr>
			  <tr id="tr_special_dial" style="display:none;">
				<th>
				  <script>I18N("h","Network_Special_Dialing");</script>
				</th>
				<td>
					<select name="select_networktype_special" id="select_networktype_special" onChange="changnetWorkType_special();">
						<option id="option_pppoe1" value="PPPoE_Plus"></option>
						<option id="option_pppoe2" value="PPPoE_Dynamic"></option>
						<option id="option_pppoe3" value="PPPoE_Other1"></option>
						<option id="option_pppoe4" value="PPPoE_Other2"></option>
						<!-- <option id="option_dhcp_plus" value="DHCPPlus"></option> -->
					</select>
				</td>
			  </tr>
			  <tr id="dhcp_plus_1" class="space" style="display:none;"></tr>
			  <tr id="dhcp_plus_2" style="display:none;">
				<th>
					<script>I18N("h","Network_DHCP_Plus_Account");</script>
				</th>
				<td>
					<input type="text" id="dhcp_plus_name" size="30" name="dhcp_plus_name" class="styled-text" maxlength="32">
				</td>
			  </tr>
			  <tr id="error_dhcp_plus_1" style="display:none;">
			  	<td>&nbsp;</td>
			  	<td class="errorinfo">
					<table>
						<tbody>
							<tr>
								<td><div class="ic-sign ic"></div></td>
								<td id="errorinfo_dhcp_plus_1"></td>
							</tr>
						</tbody>
					</table>
				</td>
			 </tr>
			  <tr id="dhcp_plus_3" class="space" style="display:none;"></tr>
			  <tr id="dhcp_plus_4" style="display:none;">
				<th>
					<script>I18N("h","Network_DHCP_Plus_Password");</script>
				</th>
				<td>
					<input type="text" id="dhcp_plus_password" size="30" name="dhcp_plus_password" class="styled-text" maxlength="63">
				</td>
			  </tr>
			  <tr id="error_dhcp_plus_2" style="display:none;">
			  	<td>&nbsp;</td>
			  	<td class="errorinfo">
					<table>
						<tbody>
							<tr>
								<td><div class="ic-sign ic"></div></td>
								<td id="errorinfo_dhcp_plus_2"></td>
							</tr>
						</tbody>
					</table>
				</td>
			 </tr>
			  <tr class="space" id="emty_1"> </tr>
			  <tr id="pppoe_1" style="display:none; ">
			  	<th><script>I18N("h","Network_Broadband_Account");</script><!-- 宽带帐号 --></th>
				<td><input type="text" id="pppoe_name" size="30" name="pppoe_name" class="styled-text" maxlength="32"></td>
			  </tr>
			  <tr id="error_1" style="display:none; ">
			  	<td>&nbsp;</td>
			  	<td class="errorinfo">
					<table>
						<tbody>
							<tr>
								<td>
								<div class="ic-sign ic"></div>
							  </td>
							  <td id="errorinfo_1"></td>
							</tr>
						</tbody>
					  </table>
				</td>
			 </tr>
			  <tr class="space" id="emty_2" style="display:none; "></tr>			  
			  <tr id="pppoe_2" style="display:none; ">
			  	<th><script>I18N("h","Network_Broadband_Password");</script><!-- 宽带密码 --></th>
				<td>
				<!-- <input type="password" id="pppoe_psassword" size="30" name="pppoe_psassword" class="styled-text" maxlength="63"> -->
					<div class="text_eye_div" id="pppoepassworddiv1">
						<input type="password" id="pppoe_psassword1" size="30" maxlength="63" name="pppoe_psassword1" class="text_eye_input">
						<div class="ui-input-rightimg_eye1" id="closepassword2" onClick="passwordType(0);"><img src="/image/icon_xianshi.png" height="20" width="20"></div>
						<label id="pwdstr1" for="pppoe_psassword1" class="inputpwdlable" style="display:none;"><script>I18N("h","Network_Broadband_Password_Input");</script><!-- 请输入宽带密码 --></label>
					</div>
					<div class="text_eye_div" id="pppoepassworddiv2" style="display:none; ">
						<input type="text" id="pppoe_psassword2" size="30" maxlength="63" name="pppoe_psassword2" class="text_eye_input">
						<div class="ui-input-rightimg_eye1" id="openpassword2" onClick="passwordType(1);"><img src="/image/icon_yingcang.png" height="20" width="20"></div>
						<label id="pwdstr2" for="pppoe_psassword2" class="inputpwdlable"><script>I18N("h","Network_Broadband_Password_Input");</script><!-- 请输入宽带密码 --></label>
					</div>
				</td>
			  </tr>
			  <tr id="error_2" style="display:none">
			  	<td>&nbsp;</td>
			  	<td class="errorinfo">
					<table>
						<tbody>
							<tr>
								<td>
								<div class="ic-sign ic"></div>
							  </td>
							  <td id="errorinfo_2">MTU错误</td>
							</tr>
						</tbody>
					  </table>
				</td>
			 </tr>			  
			  <tr class="space" id="emty_3" style="display:none; ">
			  </tr>
			  <tr id="pppoe_3" style="display:none; ">
			  	<th><script>I18N("h","Network_Service_Name");</script><!-- 服务名 --></th>
				<td><input type="text" id="pppoe_serviename" size="30" maxlength="32" name="pppoe_serviename" class="styled-text"></td>
			  </tr>
			  <tr id="error_3" style="display:none; ">
			  	<td>&nbsp;</td>
			  	<td class="errorinfo">
					<table>
						<tbody>
							<tr>
								<td>
								<div class="ic-sign ic"></div>
							  </td>
							  <td id="errorinfo_3"></td>
							</tr>
						</tbody>
					  </table>
				</td>
			 </tr>			  
			 <tr class="space" id="emty_4" style="display:none; "> </tr>
			  <tr id="static_1" style="display:none; ">
			  	<th><script>I18N("h","Commom_IP_Address");</script><!-- IP地址 --></th>
				<td><input type="text" id="staticIpaddr" maxlength="15" size="30" name="staticIpaddr" class="styled-text"></td>
			  </tr>
			  <tr id="error_4" style="display:none; ">
			  	<td>&nbsp;</td>
			  	<td class="errorinfo">
					<table>
						<tbody>
							<tr>
								<td>
								<div class="ic-sign ic"></div>
							  </td>
							  <td id="errorinfo_4" style="line-height:20px;"></td>
							</tr>
						</tbody>
					  </table>
				</td>
			 </tr>
			 <tr class="space" id="emty_5" style="display:none; ">	</tr>
			  <tr id="static_2" style="display:none; ">
			  	<th><script>I18N("h","Commom_Subnet_Mask");</script><!-- 子网掩码 --></th>
				<td><input type="text" id="staticmask" maxlength="15" size="30" name="staticmask" class="styled-text"></td>
			  </tr>			  
			  <tr id="error_5" style="display:none; ">
			  	<td>&nbsp;</td>
			  	<td class="errorinfo">
					<table>
						<tbody>
							<tr>
								<td>
								<div class="ic-sign ic"></div>
							  </td>
							  <td id="errorinfo_5"></td>
							</tr>
						</tbody>
					  </table>
				</td>
			 </tr>			  
			  <tr class="space" id="emty_6" style="display:none; ">	</tr>
			  <tr id="static_3" style="display:none; ">
			  	<th><script>I18N("h","Commom_Default_Gateway");</script><!-- 默认网关 --></th>
				<td><input type="text" id="staticgateway" maxlength="15" size="30" name="staticgateway" class="styled-text"></td>
			  </tr>
			  <tr id="error_6" style="display:none; ">
			  	<td>&nbsp;</td>
			  	<td class="errorinfo">
					<table>
						<tbody>
							<tr>
								<td>
								<div class="ic-sign ic"></div>
							  </td>
							  <td id="errorinfo_6" style="line-height:20px;"></td>
							</tr>
						</tbody>
					  </table>
				</td>
			 </tr>			  
			   <tr class="space" id="emty_7" style="display:none; ">	</tr>			
			  <tr id="static_4" style="display:none; ">
			  	<th><script>I18N("h","Network_Primary_DNS");</script><!-- 首选DNS（必填） --></th>
				<td><input type="text" id="staticdns1" maxlength="15" size="30" name="staticdns1" class="styled-text"></td>
			  </tr>	
			  <tr id="error_7" style="display:none; ">
			  	<td>&nbsp;</td>
			  	<td class="errorinfo">
					<table>
						<tbody>
							<tr>
								<td>
								<div class="ic-sign ic"></div>
							  </td>
							  <td id="errorinfo_7"></td>
							</tr>
						</tbody>
					  </table>
				</td>
			 </tr>							
				<tr class="space" id="emty_8" style="display:none; ">	</tr>				 
			  <tr id="static_5" style="display:none; ">
			  	<th><script>I18N("h","Network_Secondary_DNS");</script><!-- 备用DNS（选填） --></th>
				<td><input type="text" id="staticdns2" maxlength="15" size="30" name="staticdns2" class="styled-text"></td>
			  </tr>
			  <tr id="error_8" style="display:none; ">
			  	<td>&nbsp;</td>
			  	<td class="errorinfo">
					<table>
						<tbody>
							<tr>
								<td>
								<div class="ic-sign ic"></div>
							  </td>
							  <td id="errorinfo_8"></td>
							</tr>
						</tbody>
					  </table>
				</td>
			 </tr>			 
		 
			  <tr class="space" id="emty_9" style="display:none; ">	</tr>				   
			  <tr id="zonemtu">
				<th>
				  MTU
				</th>
				<td>
					<input type="text" id="mtu" size="30" maxlength="4" name="mtu" class="styled-text">
				</td>
			  </tr>
			  <tr id="error_9" style="display:none; ">
			  	<td>&nbsp;</td>
			  	<td class="errorinfo">
					<table>
						<tbody>
							<tr>
								<td>
								<div class="ic-sign ic"></div>
							  </td>
							  <td id="errorinfo_9" style="line-height:20px;"></td>
							</tr>
						</tbody>
					  </table>
				</td>
			 </tr>							
			 <tr class="space" id="emty_10"> </tr>
			  
			  <tr id="wanspeed_1">
				<th>
				  <script>I18N("h","Network_WAN_Rate");</script><!-- WAN口速率 -->
				</th>
				<td>
					<select name="select_wanspeed" id="select_wanspeed">
						<!-- <option value="Auto">自动协商</option>
						<option value="100Half">100 Mbps 半双工</option>
						<option value="100Full">100 Mbps 全双工</option>
						<option value="10Half">10 Mbps 半双工</option>
						<option value="10Full">10 Mbps 全双工</option> -->
						<option id="option_auto" value="Auto"></option>
						<option id="option_100Half" value="100Half"></option>
						<option id="option_100Full" value="100Full"></option>
						<option id="option_10Half" value="10Half"></option>
						<option id="option_10Full" value="10Full"></option>
					</select>
				</td>
			  </tr>
 			<tr class="space" id="emty_11"> </tr>
 			 <tr id="macclone_1">
				<th>
				  <script>I18N("h","Network_MAC_Clone");</script><!-- MAC克隆 -->
				</th>
				<td>
					<select name="select_macclone" id="select_macclone" onChange="changMacClone();">
					<!-- <option value="none">不使用 MAC 克隆</option>
					<option value="pcmac">使用当前终端 MAC 地址</option>
					<option value="manual">手动输入MAC 地址</option> -->
					<option id="option_not_macclone" value="none"></option>
					<option id="option_use_pcmac" value="pcmac"></option>
					<option id="option_manualmac" value="manual"></option>
					</select>
				</td>
			  </tr>			 
			  <tr class="space" id="emty_12" style="display:none; "> </tr>
			  <tr id="macclone_2" style="display:none; ">
				<th>
				  <script>I18N("h","Commom_MAC_Address");</script><!-- MAC地址 -->
				</th>
				<td>
				  <div class="styled-select">
					<input type="text" id="macaddress" maxlength="17" size="30" name="macaddress" class="styled-text">
				  </div>
				</td>
			  </tr>
			 <tr id="error_10" style="display:none; ">
			  	<td>&nbsp;</td>
			  	<td class="errorinfo">
					<table>
						<tbody>
							<tr>
								<td>
								<div class="ic-sign ic"></div>
							  </td>
							  <td id="errorinfo_10" style="line-height:20px;"></td>
							</tr>
						</tbody>
					  </table>
				</td>
			 </tr>						 
			  <tr class="space" id="emty_13"> </tr>
			  <tr id="DNS_1">
				<th>
				  <script>I18N("h","Network_Static_DNS");</script><!-- 静态DNS -->
				</th>
				<td class="tdcheckbox">
                      <div id="dns_statue" class="checkbox_off" onclick="ChangeDnsStatus()">
                        <input type="checkbox" id="dns_enable" name="dns_enable">
                      </div>
				</td>
			  </tr>			   
			<tr class="space" id="emty_14" style="display:none"> </tr>
			 <tr id="DNS_2" style="display:none">
				<th>
				  <script>I18N("h","Network_Primary_DNS");</script><!-- 首选DNS（必填） -->
				</th>
				<td>
					<input type="text" id="dnssever1" maxlength="15" size="30" name="dnssever1" class="styled-text">
				</td>
			  </tr>		
			 <tr id="error_11" style="display:none; ">
			  	<td>&nbsp;</td>
			  	<td class="errorinfo">
					<table>
						<tbody>
							<tr>
								<td>
								<div class="ic-sign ic"></div>
							  </td>
							  <td id="errorinfo_11"></td>
							</tr>
						</tbody>
					  </table>
				</td>
			 </tr>						
			 <tr class="space" id="emty_15" style="display:none"> </tr>
			 <tr id="DNS_3" style="display:none">
				<th>
				  <script>I18N("h","Network_Secondary_DNS");</script><!-- 备用DNS（选填） -->
				</th>
				<td>
					<input type="text" id="dnssever2" maxlength="15" size="30" name="dnssever2" class="styled-text">
				</td>
			  </tr>						  
			 <tr id="error_12" style="display:none; ">
			  	<td>&nbsp;</td>
			  	<td class="errorinfo">
					<table>
						<tbody>
							<tr>
								<td>
								<div class="ic-sign ic"></div>
							  </td>
							  <td id="errorinfo_12"></td>
							</tr>
						</tbody>
					  </table>
				</td>
			 </tr>	
			<!--
			 <tr class="space"></tr>
			  <tr>
				<th>
				  网络连接状态
				</th>
				<td class="networkstatue" style="width:240px; ">已连接</td>
			  </tr>	
			-->
			  <tr>
			  	<td>&nbsp;</td>
				<!-- <td class="tdbutton"><input type="button" value="保存" id="savebutton" class="styled_button_s" onClick="SubmitWan();"></td> -->
				<td class="tdbutton"><input type="button" value="" id="savebutton" class="styled_button_s" onClick="SubmitWan();"></td>
			  </tr>			 
			   </tbody>
		  </table>
		</div>
		 <div class="clearboth"> </div>
		</div>
		<div id="auto_detect_content" style="display:none; "><div style=" margin-left:316px;margin-top:68px; " align="left"><img src="image/submit.gif" width="54" height="54"></div><div style="color:#333333;margin-top:20px; margin-left:226px;font-size:14px;" align="left">正在为您自动探测上网方式，请稍后...</div></div>
	  	</div>
	  </div>

 
</div>
 
 <div class="footer_placeholder"></div>  
</div>

<div id="CreatePopAlertMessage" style=" display:none;"></div>
<div style=" display:none;" id="DetectRouterConnection"></div>

<div id="footer"></div>

	
<div id="CreateOnloadMessage" style="display:none;">
	  <div class="OnLoadPopRect">
	 	<img src="/image/submit.gif" width="58" height="58">
	  </div>
</div>	
</body>
<script type="text/javascript">
Initial();
</script>
</html>
